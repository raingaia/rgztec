<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>RGZTEC ‚Ä¢ Listings</title>
<meta name="description" content="Discover unique products and open your store on RGZTEC."/>

<!-- ‚ûä ALT YOL ƒ∞√áƒ∞N √ñNEMLƒ∞ -->
<base href="/rgztec/apps/web/public/">

<style>
:root{
  --wrap:1100px;
  --gutter-min:12px; --gutter-max:28px;
  --ink:#0b1220; --sub:#64748b;
  --line:#e5e7eb; --line-strong:#d7dbe3;
  --brand:#f97316; --brand-dark:#ea580c;
  --search-h:52px;
}
/* base */
*{box-sizing:border-box}
html,body{margin:0;overflow-x:hidden}
body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:#fff}

/* containers */
.page-section{width:100%;max-width:var(--wrap);margin-inline:auto;padding-inline:16px}
.page-section--fluid{max-width:none;padding-inline:clamp(var(--gutter-min),4vw,var(--gutter-max))}

/* header */
.header-outer{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.85);
  backdrop-filter:saturate(120%) blur(8px);border-bottom:1px solid var(--line)}
.header-row{display:flex;align-items:center;gap:12px;flex-wrap:wrap;padding:8px 0}
.header-left,.hdr-right{flex-shrink:0}
.search-wrap{flex:1 1 auto;min-width:260px;max-width:980px}
.brand{font-weight:900;font-size:22px;color:var(--brand);text-decoration:none;margin-right:8px}
.btn-cats{display:inline-flex;align-items:center;gap:10px;height:40px;padding:0 14px;border:1px solid var(--line-strong);border-radius:12px;background:#fff;cursor:pointer}
.btn-cats svg{width:18px;height:18px}
.search{display:flex;align-items:center;height:var(--search-h);border:2px solid #111827;border-radius:999px;padding:0 8px 0 16px;width:100%;overflow:hidden}
.search input{flex:1;min-width:0;border:0;outline:0;font-size:16px;padding:12px 10px;background:transparent}
.go{display:grid;place-items:center;width:38px;height:38px;border-radius:999px;background:var(--brand);border:0;cursor:pointer;margin-right:4px}
.go svg{width:18px;height:18px;stroke:#fff;fill:none;stroke-width:2}
.hdr-right{display:flex;justify-content:flex-end;align-items:center;gap:12px;flex-wrap:nowrap}
.signin-link{color:var(--ink);text-decoration:none;font-weight:600;font-size:14px;white-space:nowrap}
.signin-link:hover{color:var(--brand)}
.icon-btn{display:grid;place-items:center;width:32px;height:32px;border-radius:999px;border:1px solid var(--line-strong);background:#fff}
.pill-open{display:inline-flex;align-items:center;justify-content:center;height:40px;padding:0 18px;border-radius:20px;background:var(--brand);color:#fff;font-weight:700;text-decoration:none}
.pill-open:hover{background:var(--brand-dark)}

/* store pill */
.store-pill{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line-strong);border-radius:999px;padding:6px 10px;background:#fff;font-weight:800;margin-left:8px}
.store-pill .dot{width:8px;height:8px;border-radius:50%}

/* section */
.section-container{padding-top:24px}
.section-h{font-weight:800;font-size:28px;margin:0 0 16px 0}
.section-h .tag-name{color:var(--brand)}

/* skeleton grid */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:20px;margin-top:8px}
.card-skeleton{border:1px solid var(--line);background:#fff;border-radius:16px;padding:12px;display:flex;flex-direction:column;gap:12px;position:relative;overflow:hidden}
.card-skeleton .placeholder{background:#eef2f7;border-radius:6px}
.card-skeleton .ph-image{height:160px;border-radius:12px}
.card-skeleton .ph-title{height:20px;width:85%}
.card-skeleton .ph-text{height:16px;width:50%}
@keyframes shimmer{100%{transform:translateX(100%)}}
.card-skeleton::after{content:'';position:absolute;inset:0;transform:translateX(-100%);background:linear-gradient(90deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.5),hsla(0,0%,100%,0));animation:shimmer 1.5s infinite}

/* product card */
.card{border:1px solid var(--line);background:#fff;border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
.card img{width:100%;height:160px;object-fit:cover;background:#eef2f7}
.card .pad{padding:12px}
.card .title{font-weight:700;margin:4px 0 6px}
.card .sub{color:var(--sub);font-size:14px;margin:0}
.card .row{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
.card .price{font-weight:800}
.card .btn{display:inline-block;padding:8px 12px;border-radius:10px;border:1px solid var(--line-strong);text-decoration:none}
.card .btn:hover{background:#f8fafc}

/* drawer */
.drawer{position:fixed;inset:0;display:none;z-index:40}
.drawer.open{display:block}
.back{position:absolute;inset:0;background:transparent}
.panel{position:absolute;width:280px;background:#fff;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.15);border:1px solid var(--line);padding:8px;overflow:auto;max-height:calc(100vh - 80px)}
.panel nav a{display:block;padding:10px 12px;border-radius:8px;color:var(--ink);text-decoration:none;font-weight:500;font-size:14px}
.panel nav a:hover{background:#f3f4f6}

/* footer (short) */
.footer-outer{margin-top:40px;background:#232347;color:#fff;padding:24px 0;font-size:14px;border-top:1px solid #3c3c62}
.footer-bottom{display:flex;justify-content:space-between;align-items:center;gap:16px}
.footer-bottom a{color:#fff;text-decoration:none;font-weight:600}
.footer-bottom a:hover{background:transparent;text-decoration:underline}
</style>
</head>
<body>

<header class="header-outer">
  <div class="page-section page-section--fluid header-row">
    <div class="header-left">
      <a class="brand" href="./">RGZTEC</a>

      <button id="btnCats" class="btn-cats" aria-haspopup="dialog">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
        <span>Categories</span>
      </button>

      <!-- store pill (shows when ?store=...) -->
      <span id="storePill" class="store-pill" hidden>
        <span class="dot"></span>
        <span id="storeName"></span>
      </span>
    </div>

    <div class="search-wrap">
      <form class="search" role="search" action="listings.html">
        <input type="search" name="q" placeholder="Search for anything" aria-label="Search"/>
        <button class="go" type="submit" aria-label="Search">
          <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="6" stroke="currentColor"/><path d="M16.5 16.5 21 21" stroke="currentColor"/></svg>
        </button>
      </form>
    </div>

    <div class="hdr-right">
      <a href="#" class="signin-link">Sign in</a>
      <!-- bu link absolute kaldƒ±; root‚Äôtaki gift-card.html‚Äôe gider -->
      <a class="icon-btn" href="/rgztec/gift-card.html" data-no-router title="Gift cards" aria-label="Gift cards">üéÅ</a>
      <button class="icon-btn" title="Cart">üõí</button>
      <a class="pill-open" href="open-store.html">Open Store</a>
    </div>
  </div>
</header>

<main class="page-section page-section--fluid section-container">
  <h2 class="section-h" id="pageTitle">All Products</h2>
  <div class="grid" id="gallery">
    <!-- skeletons -->
    <div class="card-skeleton"><div class="placeholder ph-image"></div><div class="placeholder ph-title"></div><div class="placeholder ph-text"></div></div>
    <div class="card-skeleton"><div class="placeholder ph-image"></div><div class="placeholder ph-title"></div><div class="placeholder ph-text"></div></div>
    <div class="card-skeleton"><div class="placeholder ph-image"></div><div class="placeholder ph-title"></div><div class="placeholder ph-text"></div></div>
    <div class="card-skeleton"><div class="placeholder ph-image"></div><div class="placeholder ph-title"></div><div class="placeholder ph-text"></div></div>
    <div class="card-skeleton"><div class="placeholder ph-image"></div><div class="placeholder ph-title"></div><div class="placeholder ph-text"></div></div>
    <div class="card-skeleton"><div class="placeholder ph-image"></div><div class="placeholder ph-title"></div><div class="placeholder ph-text"></div></div>
    <div class="card-skeleton"><div class="placeholder ph-image"></div><div class="placeholder ph-title"></div><div class="placeholder ph-text"></div></div>
    <div class="card-skeleton"><div class="placeholder ph-image"></div><div class="placeholder ph-title"></div><div class="placeholder ph-text"></div></div>
    <div class="card-skeleton"><div class="placeholder ph-image"></div><div class="placeholder ph-title"></div><div class="placeholder ph-text"></div></div>
    <div class="card-skeleton"><div class="placeholder ph-image"></div><div class="placeholder ph-title"></div><div class="placeholder ph-text"></div></div>
    <div class="card-skeleton"><div class="placeholder ph-image"></div><div class="placeholder ph-title"></div><div class="placeholder ph-text"></div></div>
    <div class="card-skeleton"><div class="placeholder ph-image"></div><div class="placeholder ph-title"></div><div class="placeholder ph-text"></div></div>
  </div>
</main>

<!-- drawer -->
<div id="drawer" class="drawer" aria-hidden="true">
  <div class="back" id="backdrop"></div>
  <aside class="panel" role="dialog" aria-label="Categories">
    <nav id="drawerNav">
      <!-- will be filled by JS -->
    </nav>
  </aside>
</div>

<footer class="footer-outer">
  <div class="page-section page-section--fluid footer-bottom">
    <span>¬© <span id="y"></span> RGZTEC, Inc.</span>
    <div>
      <a href="#">Terms of Use</a>
      <a href="#" style="margin-left:16px">Privacy</a>
      <a href="#" style="margin-left:16px">Interest-based ads</a>
    </div>
  </div>
</footer>

<!-- store meta -->
<script>
const STORE_INFO = {
  "html-templates": { name:"HTML Templates", tagline:"Polished HTML/CSS templates and starters.", categories:["Landing Pages","Portfolio","Admin & Dashboards","E-commerce","Email Templates"] },
  "email-forge":   { name:"Email Forge",    tagline:"Responsive MJML templates and automation-focused email kits.", categories:["Transactional","Marketing","Drip Flows","MJML Blocks","ESP Integrations"] },
  "icon-smith":    { name:"Icon Smith",     tagline:"Beautiful handcrafted icon packs for developers.", categories:["Outline","Solid","3D","Flags","Brand"] },
  "ai-tools-hub":  { name:"AI Tools Hub",   tagline:"LLM-powered scripts and automation kits.", categories:["Prompts","Agents","Integrations","Workflows","Analytics"] },
  "dev-studio-one":{ name:"Dev Studio One", tagline:"Modern HTML, CSS and React starters.", categories:["HTML Templates","React Components","Auth & API","Dashboards","E-commerce"] },
  "game-makers":   { name:"Game Makers",    tagline:"Unity & Unreal templates and game kits.", categories:["Unity 2D","Unity 3D","Unreal","Controllers","VFX / SFX"] },
  "reactorium":    { name:"Reactorium",     tagline:"React components, tables and charts.", categories:["UI Kit","Tables","Charts","Forms","Hooks"] },
  "tiny-js-lab":   { name:"Tiny JS Lab",    tagline:"Small but powerful JavaScript utilities.", categories:["Dates","Validation","Fetch","Storage","DOM Utils"] },
  "unity-hub":     { name:"Unity Hub",      tagline:"Unity extensions, prefabs and templates.", categories:["2D Platformer","FPS","Racing","Multiplayer","VR / AR"] },
  "wp-plugins":    { name:"WP Plugins",     tagline:"Production-ready WordPress plugins.", categories:["SEO","Security","Performance","Forms","WooCommerce"] },
  "hardware":      { name:"Hardware",       tagline:"PC parts and peripherals.", categories:[
    "CPUs","Motherboards","GPUs","Memory (RAM)","Storage (SSD/HDD)","Power Supplies",
    "Cooling","Cases","Peripherals","Networking"
  ] }
};
const STORE_COLORS = {
  "html-templates":["#a5d6ff","#3b82f6"],
  "email-forge":["#fecaca","#ef4444"],
  "icon-smith":["#bae6fd","#0ea5e9"],
  "ai-tools-hub":["#e9d5ff","#a855f7"],
  "dev-studio-one":["#a7f3d0","#10b981"],
  "game-makers":["#fde68a","#f59e0b"],
  "reactorium":["#a5f3fc","#06b6d4"],
  "tiny-js-lab":["#d9f99d","#84cc16"],
  "unity-hub":["#fecdd3","#f43f5e"],
  "wp-plugins":["#ddd6fe","#8b5cf6"],
  "hardware":["#bae6fd","#0ea5e9"]
};
</script>

<!-- logic -->
<script>
document.getElementById('y').textContent = new Date().getFullYear();

const params = new URLSearchParams(location.search);
const store = (params.get('store') || '').toLowerCase();
const rawTag = params.get('tag');
const q = params.get('q');

const fmt = s => (s||'').replace(/-/g,' ').replace(/\b\w/g, l => l.toUpperCase());
const titleEl = document.getElementById('pageTitle');

/* drawer links */
function fillDrawerForStore(slug){
  const info = STORE_INFO[slug]; if(!info) return;
  const nav = document.getElementById('drawerNav');
  nav.innerHTML =
    info.categories.map(c =>
      `<a href="listings.html?store=${encodeURIComponent(slug)}&tag=${encodeURIComponent(c)}">${c}</a>`
    ).join('') +
    `<a href="store.html?slug=${encodeURIComponent(slug)}"
       style="font-weight:700;color:var(--brand);border-top:1px solid var(--line);margin-top:4px;padding-top:12px">
       Back to ${info.name} ‚Üí</a>`;
}

/* page title + drawer content */
if (store && STORE_INFO[store]) {
  const pill = document.getElementById('storePill');
  const dot = pill.querySelector('.dot');
  document.getElementById('storeName').textContent = STORE_INFO[store].name;
  dot.style.background = (STORE_COLORS[store]?.[1] || '#475569');
  pill.hidden = false;

  if (rawTag) {
    titleEl.innerHTML = `<span class="tag-name">${STORE_INFO[store].name}</span> ‚Äî <span class="tag-name">${fmt(rawTag)}</span>`;
    document.title = `RGZTEC ‚Ä¢ ${STORE_INFO[store].name} / ${fmt(rawTag)}`;
  } else if (q) {
    titleEl.innerHTML = `<span class="tag-name">${STORE_INFO[store].name}</span> ‚Äî Results for <span class="tag-name">'${q}'</span>`;
    document.title = `RGZTEC ‚Ä¢ ${STORE_INFO[store].name} / Search: ${q}`;
  } else {
    titleEl.textContent = `${STORE_INFO[store].name} ‚Äî All Products`;
    document.title = `RGZTEC ‚Ä¢ ${STORE_INFO[store].name}`;
  }

  fillDrawerForStore(store);
} else {
  if (rawTag) {
    titleEl.innerHTML = `Results for <span class="tag-name">${fmt(rawTag)}</span>`;
    document.title = `RGZTEC ‚Ä¢ ${fmt(rawTag)}`;
  } else if (q) {
    titleEl.innerHTML = `Results for <span class="tag-name">'${q}'</span>`;
    document.title = `RGZTEC ‚Ä¢ Search: ${q}`;
  } else {
    titleEl.textContent = 'All Products';
    document.title = 'RGZTEC ‚Ä¢ Listings';
  }

  document.getElementById('drawerNav').innerHTML = `
    <a href="listings.html?tag=html-templates">HTML Templates</a>
    <a href="listings.html?tag=react">React</a>
    <a href="listings.html?tag=svg-icons">SVG / Icons</a>
    <a href="listings.html?tag=hardware">Hardware</a>
    <a href="listings.html">All Categories ‚Üí</a>`;
}

/* drawer open/close */
const drawer=document.getElementById('drawer'),
      back=document.getElementById('backdrop'),
      panel=drawer.querySelector('.panel'),
      openBtn=document.getElementById('btnCats');

function openDrawer(){
  const r = openBtn.getBoundingClientRect();
  panel.style.top = `${r.bottom + 8}px`;
  panel.style.left = `${r.left}px`;
  drawer.classList.add('open');
  drawer.setAttribute('aria-hidden','false');
}
function closeDrawer(){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); }
openBtn?.addEventListener('click',e=>{ e.stopPropagation(); drawer.classList.contains('open')?closeDrawer():openDrawer(); });
back?.addEventListener('click',closeDrawer);
window.addEventListener('keydown',e=>{ if(e.key==='Escape') closeDrawer(); });

/* ---- PRODUCTS RENDER (multi-path fetch + normalize) ---- */
const usd = new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'});

/* Birden fazla muhtemel yolu sƒ±rayla dene */
const DATA_URLS = [
  '/data/products.json',
  '/rgztec/apps/web/public/data/products.json',
  '/rgztec/data/products.json',
  '/data/products.json'
];

function normalize(raw){
  if (Array.isArray(raw)) {
    return {
      categories: [],
      products: raw.map(x => ({
        id: x.id,
        cat: '',
        title: x.title,
        desc: x.description || '',
        price: x.price,
        thumb: `assets/thumbs/${(x.image||'').replace(/\.(png|jpg|jpeg|webp)$/i,'') || 'placeholder'}.png`,
        tags: Array.isArray(x.tags) ? x.tags : []
      }))
    };
  }
  const categories = Array.isArray(raw.categories) ? raw.categories : [];
  const prods = Array.isArray(raw.products) ? raw.products.map(p => ({
    id: p.id,
    cat: p.cat || '',
    title: p.title,
    desc: p.desc || '',
    price: p.price,
    thumb: p.thumb || 'assets/img/placeholder.png',
    tags: Array.isArray(p.tags) ? p.tags : []
  })) : [];
  const gallery = Array.isArray(raw.gallery) ? raw.gallery.map(x => ({
    id: `g-${x.id}`,
    cat: '',
    title: x.title,
    desc: x.description || '',
    price: x.price,
    thumb: `assets/thumbs/${(x.image||'').replace(/\.(png|jpg|jpeg|webp)$/i,'') || 'placeholder'}.png`,
    tags: Array.isArray(x.tags) ? x.tags : []
  })) : [];
  return { categories, products: prods.length ? prods : gallery };
}

function card(p){
  const img = p.thumb || 'assets/img/placeholder.png';
  return `
    <div class="card">
      <img src="${img}" alt="${p.title}">
      <div class="pad">
        <div class="title">${p.title}</div>
        <p class="sub">${p.desc || ''}</p>
        <div class="row">
          <span class="price">${usd.format(Number(p.price||0))}</span>
          <a class="btn" href="product.html?id=${encodeURIComponent(p.id)}">Details</a>
        </div>
      </div>
    </div>`;
}

function render(list, err){
  const g = document.getElementById('gallery');
  if (err) { g.innerHTML = `<div class="sub">Load error: ${err}</div>`; return; }
  if(!list || list.length===0){
    g.innerHTML = `<div class="sub">No products found.</div>`;
    return;
  }
  g.innerHTML = list.map(card).join('');
}

async function tryFetchJson(urls){
  let lastErr;
  for (const u of urls){
    try{
      const res = await fetch(u, { cache:'no-store' });
      if(!res.ok) throw new Error(`HTTP ${res.status} @ ${u}`);
      const data = await res.json();
      console.log('[products] loaded from', u);
      return data;
    }catch(e){
      console.warn('[products] failed', u, e);
      lastErr = e;
    }
  }
  throw lastErr || new Error('All sources failed');
}

function matchStore(p, s){ return !s || (p.cat && p.cat.toLowerCase()===s); }
function matchTag(p, t, cats){
  if(!t) return true;
  const tLower = t.toLowerCase();
  const byTags  = (p.tags||[]).some(x => String(x).toLowerCase()===tLower);
  const byTitle = String(p.title||'').toLowerCase().includes(tLower);
  const catHit  = (cats||[]).find(c =>
    (c.slug||'').toLowerCase()===tLower || String(c.name||'').toLowerCase()===tLower
  );
  const byCat = catHit ? (p.cat||'').toLowerCase() === (catHit.slug||'').toLowerCase() : false;
  return byTags || byTitle || byCat;
}
function matchQuery(p, s){
  if(!s) return true;
  const h = s.toLowerCase();
  return String(p.title||'').toLowerCase().includes(h) || String(p.desc||'').toLowerCase().includes(h);
}

async function loadAndRender(){
  try{
    const raw = await tryFetchJson(DATA_URLS);
    const { categories, products } = normalize(raw);

    let list = products.slice();
    if(store)  list = list.filter(p => matchStore(p, store));
    if(rawTag) list = list.filter(p => matchTag(p, rawTag, categories));
    if(q)      list = list.filter(p => matchQuery(p, q));

    render(list);
  }catch(err){
    console.error(err);
    render(null, String(err.message||err));
  }
}
loadAndRender();
</script>

<!-- ‚ûã HEADER √áOƒûALMASINI √ñNLEYEN K√ú√á√úK BEK√áƒ∞ -->
<script src="assets/js/app.js" defer></script>
</body>
</html>

