<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>RGZTEC ‚Ä¢ Store</title>
<meta name="description" content="Browse a dedicated RGZTEC store."/>
<style>
:root{
  --wrap:1100px; --gutter-min:12px; --gutter-max:28px;
  --ink:#0b1220; --sub:#64748b;
  --line:#e5e7eb; --line-strong:#d7dbe3;
  --brand:#f97316; --search-h:52px;
}
*{box-sizing:border-box}
html,body{margin:0;overflow-x:hidden}
body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:#fff}
.page-section{width:100%;max-width:var(--wrap);margin-inline:auto;padding-inline:16px}
.page-section--fluid{max-width:none;padding-inline:clamp(var(--gutter-min),4vw,var(--gutter-max))}
.header-outer{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.85);
  backdrop-filter:saturate(120%) blur(8px);border-bottom:1px solid var(--line)}
.header-row{display:flex;align-items:center;gap:12px;flex-wrap:wrap;padding:8px 0}
.brand{font-weight:900;font-size:22px;color:var(--brand);text-decoration:none;margin-right:8px}
.search-wrap{flex:1 1 auto;min-width:260px;max-width:980px}
.search{display:flex;align-items:center;height:var(--search-h);border:2px solid #111827;border-radius:999px;padding:0 8px 0 16px;width:100%}
.search input{flex:1;min-width:0;border:0;outline:0;font-size:16px;padding:12px 10px;background:transparent}
.go{display:grid;place-items:center;width:38px;height:38px;border-radius:999px;background:var(--brand);border:0;cursor:pointer;margin-right:4px}
.go svg{width:18px;height:18px;stroke:#fff;fill:none;stroke-width:2}
.hdr-right{display:flex;justify-content:flex-end;align-items:center;gap:12px}
.icon-btn{display:grid;place-items:center;width:32px;height:32px;border-radius:999px;border:1px solid var(--line-strong);background:#fff}
.pill-open{display:inline-flex;align-items:center;justify-content:center;height:40px;padding:0 18px;border-radius:20px;background:var(--brand);color:#fff;font-weight:700;text-decoration:none}

.store-pill{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line-strong);border-radius:999px;padding:6px 10px;background:#fff;font-weight:800;margin-left:8px}
.store-pill .dot{width:8px;height:8px;border-radius:50%}
.hero{background:linear-gradient(180deg,#fff,#fafbff);border-bottom:1px solid var(--line)}
.hero-inner{display:flex;align-items:center;gap:12px;padding:16px 0}
.hero-title{font-weight:900;font-size:22px;margin:0}
.hero-tag{color:var(--sub);margin:0}
.section{padding-top:24px}
.section h2{font-weight:800;font-size:22px;margin:0 0 12px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:20px;margin-top:8px}
.card{border:1px solid var(--line);background:#fff;border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
.card img{width:100%;height:160px;object-fit:cover;background:#eef2f7}
.card .pad{padding:12px}
.card .title{font-weight:700;margin:4px 0 6px}
.card .sub{color:var(--sub);font-size:14px;margin:0}
.card .row{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
.card .price{font-weight:800}
.card .btn{display:inline-block;padding:8px 12px;border-radius:10px;border:1px solid var(--line-strong);text-decoration:none}
.card .btn:hover{background:#f8fafc}
.note{color:var(--sub);font-size:14px}
.err{color:#b91c1c;background:#fee2e2;border:1px solid #fecaca;padding:12px;border-radius:12px}
.footer{margin-top:40px;background:#232347;color:#fff;border-top:1px solid #3c3c62}
.footer-inner{display:flex;justify-content:space-between;align-items:center;gap:16px;padding:24px 0}
</style>
</head>
<body>
<header class="header-outer">
  <div class="page-section page-section--fluid header-row">
    <a class="brand" href="./">RGZTEC</a>
    <span id="storePill" class="store-pill" hidden>
      <span class="dot"></span><span id="storeName"></span>
    </span>
    <div class="search-wrap">
      <form class="search" role="search" action="listings.html">
        <input type="search" name="q" placeholder="Search for anything" aria-label="Search">
        <button class="go" type="submit" aria-label="Search">
          <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="6" stroke="currentColor"/><path d="M16.5 16.5 21 21" stroke="currentColor"/></svg>
        </button>
      </form>
    </div>
    <div class="hdr-right">
      <a class="icon-btn" href="gift-card.html" title="Gift">üéÅ</a>
      <a class="pill-open" href="open-store.html">Open Store</a>
    </div>
  </div>
</header>

<section class="hero">
  <div class="page-section page-section--fluid hero-inner">
    <div>
      <h1 id="heroTitle" class="hero-title">Store</h1>
      <p id="heroTag" class="hero-tag"></p>
    </div>
  </div>
</section>

<main class="page-section page-section--fluid section">
  <h2 id="sectionTitle">Products</h2>
  <div id="grid" class="grid">
    <!-- JS dolduracak; hata olursa burada mesaj g√∂stereceƒüiz -->
  </div>
</main>

<footer class="footer">
  <div class="page-section page-section--fluid footer-inner">
    <span>¬© <span id="y"></span> RGZTEC, Inc.</span>
    <div><a style="color:#fff;text-decoration:none;font-weight:600" href="#">Terms</a></div>
  </div>
</footer>

<script>
document.getElementById('y').textContent = new Date().getFullYear();

/* ---- Maƒüaza meta ---- */
const STORE_INFO = {
  "html-templates": { name:"HTML Templates", tagline:"Polished HTML/CSS templates and starters." },
  "email-forge":   { name:"Email Forge",    tagline:"Responsive MJML templates and automation-focused email kits." },
  "icon-smith":    { name:"Icon Smith",     tagline:"Beautiful handcrafted icon packs for developers." },
  "ai-tools-hub":  { name:"AI Tools Hub",   tagline:"LLM-powered scripts and automation kits." },
  "dev-studio-one":{ name:"Dev Studio One", tagline:"Modern HTML, CSS and React starters." },
  "game-makers":   { name:"Game Makers",    tagline:"Unity & Unreal templates and game kits." },
  "reactorium":    { name:"Reactorium",     tagline:"React components, tables and charts." },
  "tiny-js-lab":   { name:"Tiny JS Lab",    tagline:"Small but powerful JavaScript utilities." },
  "unity-hub":     { name:"Unity Hub",      tagline:"Unity extensions, prefabs and templates." },
  "wp-plugins":    { name:"WP Plugins",     tagline:"Production-ready WordPress plugins." },
  "hardware":      { name:"Hardware",       tagline:"PC parts and peripherals." }
};
const STORE_COLORS = {
  "html-templates":["#a5d6ff","#3b82f6"],
  "email-forge":["#fecaca","#ef4444"],
  "icon-smith":["#bae6fd","#0ea5e9"],
  "ai-tools-hub":["#e9d5ff","#a855f7"],
  "dev-studio-one":["#a7f3d0","#10b981"],
  "game-makers":["#fde68a","#f59e0b"],
  "reactorium":["#a5f3fc","#06b6d4"],
  "tiny-js-lab":["#d9f99d","#84cc16"],
  "unity-hub":["#fecdd3","#f43f5e"],
  "wp-plugins":["#ddd6fe","#8b5cf6"],
  "hardware":["#c7f0d8","#10b981"]
};

/* ---- URL param ---- */
const params = new URLSearchParams(location.search);
const slug = (params.get('slug') || '').toLowerCase();

/* ---- Ba≈ülƒ±k ve rozet ---- */
(function mountHeader(){
  const info = STORE_INFO[slug];
  const pill = document.getElementById('storePill');
  const dot  = pill.querySelector('.dot');
  if (!info){
    document.getElementById('heroTitle').textContent = 'Store not found';
    document.getElementById('heroTag').textContent   = 'Unknown store slug: ' + (slug || '(empty)');
    return;
  }
  pill.hidden = false;
  document.getElementById('storeName').textContent = info.name;
  dot.style.background = (STORE_COLORS[slug]?.[1] || '#475569');
  document.getElementById('heroTitle').textContent = info.name;
  document.getElementById('heroTag').textContent   = info.tagline || '';
  document.title = `RGZTEC ‚Ä¢ ${info.name}`;
})();

/* ---- √áoklu-yol √ºr√ºn y√ºkleyici ---- */
const DATA_URLS = [
  'assets/data/products.json',
  '/rgztec/apps/web/public/assets/data/products.json',
  '/rgztec/assets/data/products.json',
  '/assets/data/products.json'
];
const usd = new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'});

async function tryFetchJson(urls){
  let lastErr;
  for (const u of urls){
    try{
      const res = await fetch(u,{cache:'no-store'});
      if(!res.ok) throw new Error(`HTTP ${res.status} @ ${u}`);
      const data = await res.json();
      console.log('[store] loaded products from', u);
      return data;
    }catch(e){
      console.warn('[store] failed', u, e);
      lastErr = e;
    }
  }
  throw lastErr || new Error('All sources failed');
}

function normalize(raw){
  if (Array.isArray(raw)){
    return raw.map(x => ({
      id:x.id, cat:'', title:x.title, desc:x.description||'',
      price:x.price, thumb:`assets/thumbs/${(x.image||'').replace(/\.(png|jpe?g|webp)$/i,'')||'placeholder'}.png`,
      tags:Array.isArray(x.tags)?x.tags:[]
    }));
  }
  const prods = Array.isArray(raw?.products)? raw.products.map(p=>({
    id:p.id, cat:p.cat||'', title:p.title, desc:p.desc||'',
    price:p.price, thumb:p.thumb||'assets/img/placeholder.png',
    tags:Array.isArray(p.tags)?p.tags:[]
  })):[];
  const gallery = Array.isArray(raw?.gallery)? raw.gallery.map(x=>({
    id:`g-${x.id}`, cat:'', title:x.title, desc:x.description||'',
    price:x.price, thumb:`assets/thumbs/${(x.image||'').replace(/\.(png|jpe?g|webp)$/i,'')||'placeholder'}.png`,
    tags:Array.isArray(x.tags)?x.tags:[]
  })):[];
  return prods.length? prods : gallery;
}

function card(p){
  const img = p.thumb || 'assets/img/placeholder.png';
  return `
  <div class="card">
    <img src="${img}" alt="${p.title}">
    <div class="pad">
      <div class="title">${p.title}</div>
      <p class="sub">${p.desc||''}</p>
      <div class="row">
        <span class="price">${usd.format(Number(p.price||0))}</span>
        <a class="btn" href="product.html?id=${encodeURIComponent(p.id)}">Details</a>
      </div>
    </div>
  </div>`;
}

function render(list, err){
  const g = document.getElementById('grid');
  if (err){ g.innerHTML = `<div class="err">${err}</div>`; return; }
  if (!list.length){ g.innerHTML = `<div class="note">No products found in this store.</div>`; return; }
  g.innerHTML = list.map(card).join('');
}

(async function main(){
  try{
    if (!STORE_INFO[slug]){ return; } // zaten ba≈ülƒ±kta "not found" g√∂sterdik
    const raw = await tryFetchJson(DATA_URLS);
    const all = normalize(raw);
    const list = all.filter(p => (p.cat||'').toLowerCase() === slug);
    render(list);
  }catch(e){
    console.error(e);
    render([], String(e.message||e));
  }
})();
</script>
</body>
</html>

