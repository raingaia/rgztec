<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>RGZTEC • Premium Digital Marketplace</title>

  <base href="/rgztec/">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="assets/css/theme-tokens.css?v=1">
  <link rel="stylesheet" href="assets/css/store-core.css">
  <link rel="stylesheet" href="assets/css/home.css">

  <style>
    /* --- 1. TEMEL AYARLAR --- */
    img, a img { border: none !important; outline: none !important; }
    .header-inner { position: relative; }
    .header-left { position: relative; z-index: 1001; }

    /* --- 2. BENTO ICON (SVG & ANIMASYON) --- */
    .bento-icon-svg{
      width: 20px;
      height: 20px;
      margin-right: 8px;
      color: currentColor;
      transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
    }
    .btn-cat.active .bento-icon-svg{
      transform: rotate(90deg);
      color: #ff6b00;
    }
    .btn-cat{ display:flex; align-items:center; gap:4px; }

    /* --- 3. KATEGORİ PANELİ --- */
    .categories-panel-wrap{
      display:none;
      opacity:0;
      visibility:hidden;
      position:absolute;
      top:100%;
      left:0;
      margin-top:12px;
      width:260px;
      transform-origin: top left;
      transform: translateY(-10px);
      transition: all 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      z-index:9999;
    }
    .categories-panel-wrap.active{
      display:block;
      opacity:1;
      visibility:visible;
      transform: translateY(0);
    }
    .categories-panel{
      background:#ffffff;
      border:1px solid rgba(0,0,0,0.08);
      border-radius:12px;
      box-shadow:0 12px 30px rgba(0,0,0,0.1);
      padding:8px 0;
      min-height:50px;
    }

    /* --- 4. LİNK TASARIMI --- */
    .cat-link{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:11px 20px;
      text-decoration:none;
      color:#4b5563;
      font-size:14px;
      font-weight:500;
      font-family:'Inter', sans-serif;
      transition: all 0.2s;
      border-left:3px solid transparent;
      cursor:pointer;
    }
    .cat-link:hover{
      background-color:#f9fafb;
      color:#ff6b00;
      border-left-color:#ff6b00;
      padding-left:24px;
    }
    .cat-arrow{ font-size:16px; color:#ccc; }
    .cat-link:hover .cat-arrow{ color:#ff6b00; }

    .menu-status-msg{
      padding:15px 20px;
      font-size:13px;
      color:#888;
    }

    /* --- 5. İKONLAR --- */
    .icon-action{
      display:flex;
      align-items:center;
      justify-content:center;
      color: var(--text-main, #333);
      transition: color 0.2s;
      text-decoration:none;
      padding: 0 8px;
    }
    .icon-action:hover{ color: var(--primary, #ff6b00); }
  </style>
</head>

<body>

  <header class="app-header">
    <div class="container header-inner">
      <div class="header-left">
        <a href="./" class="logo">RGZTEC</a>

        <button id="btn-categories" class="btn-cat">
          <svg class="bento-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="7" height="7" rx="2"></rect>
            <rect x="14" y="3" width="7" height="7" rx="2"></rect>
            <rect x="14" y="14" width="7" height="7" rx="2"></rect>
            <rect x="3" y="14" width="7" height="7" rx="2"></rect>
          </svg>
          Categories
        </button>

        <div id="categories-panel" class="categories-panel-wrap">
          <div class="categories-panel">
            <div class="categories-list" id="categories-list-container">
              <div class="menu-status-msg">Loading...</div>
            </div>
          </div>
        </div>
      </div>

      <div class="search-bar">
        <input type="text" class="search-input" placeholder="Search marketplace...">
        <button class="search-btn">
          <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
        </button>
      </div>

      <div class="nav-right">
        <a href="editor/" class="nav-link">Dashboard / Editor</a>
        <a href="login/" class="nav-link">Sign In</a>

        <a href="gift-cards/" class="icon-action" title="Gift Cards">
          <svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21 11.25v8.25a1.5 1.5 0 01-1.5 1.5H4.5a1.5 1.5 0 01-1.5-1.5v-8.25M3 11.25h18M3 11.25l7.5-7.5M21 11.25l-7.5-7.5m-6 0l-1.5 1.5m7.5-1.5l1.5 1.5m-6 6v7.5" />
          </svg>
        </a>

        <a href="cart.html" class="icon-action" title="Cart">
          <svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24">
            <path d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0z"/>
          </svg>
        </a>

        <a href="open-store.html" class="btn-open-store">Open Store</a>
      </div>
    </div>
  </header>

  <nav class="sub-nav">
    <div class="sub-nav-list" id="sub-nav-list"></div>
  </nav>

  <!-- HOME HERO (CSS home.css'ten gelecek) -->
  <section class="home-hero">
    <div class="container hero-inner">
      <div class="hero-left">
        <div class="hero-kicker">#1 GLOBAL MARKETPLACE</div>
        <h1 class="hero-title">
          Premium <span>digital assets</span> for<br>modern builders.
        </h1>
        <p class="hero-desc">
          RGZTEC brings together high-quality HTML templates, React components, AI tools, and hardware accessories.
        </p>

        <div class="hero-meta">
          <span class="hero-dot"></span>
          <span><b>11+</b> Stores</span>
          <span class="hero-sep">•</span>
          <span><b>Instant</b> Delivery</span>
        </div>
      </div>

      <div class="hero-right">
        <div class="hero-card">
          <div class="hero-badge">#1 BEST SELLING</div>
          <div class="hero-big">Global Marketplace</div>

          <div class="hero-art">
            <img src="assets/images/banners/global-marketplace-banner.webp" alt="RGZTEC Global Marketplace Banner">
          </div>
        </div>
      </div>
    </div>
  </section>

  <main class="container">
    <div class="section-header" style="margin-bottom: 24px; margin-top: 28px;">
      <h2 class="gallery-title">Explore Stores</h2>
    </div>
    <div id="gallery" class="grid"></div>
  </main>

  <!-- ✅ FOOTER SPACER KALDIRILDI -->

  <footer class="footer">
    <div class="container footer-inner">

      <div class="footer-brand">
        <div class="footer-logo">RGZTEC</div>
        <p>Premium digital marketplace for code, UI kits and hardware accessories.</p>
      </div>

      <div class="footer-columns">
        <div class="footer-col">
          <h4>Marketplace</h4>
          <a href="#gallery">Explore stores</a>
          <a href="#">Open a store</a>
        </div>

        <div class="footer-col">
          <h4>Company</h4>
          <a href="#">About</a>
          <a href="#">Contact</a>
        </div>

        <div class="footer-col">
          <h4>Stay in touch</h4>
          <a href="mailto:support@rgztec.com" class="footer-email">support@rgztec.com</a>
        </div>
      </div>

      <div class="footer-bot">
        <span>© 2025 RGZTEC, Inc. All rights reserved.</span>
        <div class="footer-links">
          <a href="#">Privacy</a>
          <a href="#">Terms</a>
        </div>
      </div>

    </div>
  </footer>

  <script src="assets/js/home-products.js"></script>
  <script>
document.addEventListener('DOMContentLoaded', () => {
  const JSON_PATH = 'data/store.data.json';

  const grid = document.getElementById('gallery');
  const subNav = document.getElementById('sub-nav-list');

  // --- slug normalizer (tek gerçek kaynak) ---
  const toSlug = (s="") => String(s)
    .trim().toLowerCase()
    .replace(/&/g, "and")
    .replace(/[^a-z0-9]+/g, "-")
    .replace(/^-+|-+$/g, "");

  // --- render subnav categories (slug bazlı) ---
  function renderCategories(stores) {
    if (!subNav) return;

    const map = new Map(); // slug -> label
    stores.forEach(st => {
      const label = st.category || "Other";
      const slug = st.categorySlug || toSlug(label);
      if (!map.has(slug)) map.set(slug, label);
    });

    const cats = [...map.entries()].sort((a,b)=> a[1].localeCompare(b[1]));

    subNav.innerHTML = `
      <button class="subcat is-active" data-cat="all">All</button>
      ${cats.map(([slug,label])=>`<button class="subcat" data-cat="${slug}">${label}</button>`).join("")}
    `;

    subNav.addEventListener('click', (e) => {
      const btn = e.target.closest('.subcat');
      if (!btn) return;

      subNav.querySelectorAll('.subcat').forEach(b=>b.classList.remove('is-active'));
      btn.classList.add('is-active');

      applyCategory(btn.dataset.cat);
    });
  }

  // --- filter cards (ASLA index kullanmaz) ---
  function applyCategory(catSlug) {
    if (!grid) return;
    grid.querySelectorAll('.store-card').forEach(card => {
      const c = card.dataset.category;
      card.style.display = (catSlug === 'all' || c === catSlug) ? '' : 'none';
    });
  }

  // --- OPTIONAL: eğer home-products.js kart basıyorsa bunu kapatmak istemiyorsan,
  // sadece mevcut kartlara data-category yazdırman yeterli.
  // Bu fonksiyon yoksa biz burada kartları basarız.
  function renderCards(stores) {
    if (!grid) return;

    // Eğer grid zaten doluysa, dokunma:
    if (grid.children.length > 0) {
      // Mevcut kartlara category slug yoksa eklemeye çalış:
      grid.querySelectorAll('[data-store-slug]').forEach(card => {
        const slug = card.getAttribute('data-store-slug');
        const st = stores.find(x => x.slug === slug);
        if (st) {
          const cat = st.category || "Other";
          card.dataset.category = st.categorySlug || toSlug(cat);
          card.classList.add('store-card');
        }
      });
      return;
    }

    // Grid boşsa -> biz basıyoruz:
    grid.innerHTML = stores.map(st => {
      const catLabel = st.category || "Other";
      const catSlug  = st.categorySlug || toSlug(catLabel);

      return `
        <article class="store-card" data-store-slug="${st.slug}" data-category="${catSlug}">
          <div class="card-badge">OFFICIAL STORE</div>
          <h3 class="card-title">${st.title}</h3>
          <p class="card-desc">${st.description || ''}</p>
          <a class="card-link" href="${st.url}">Visit Store →</a>
        </article>
      `;
    }).join('');
  }

  function buildStores(data) {
    return Object.entries(data).map(([slug, store]) => ({
      slug,
      title: store.title || store.name || slug,
      description: store.description || store.tagline || "",
      category: store.category || store.group || store.type || "Other",
      categorySlug: store.categorySlug || store.groupSlug || "",
      url: `store/${slug}/`
    }));
  }

  fetch(JSON_PATH + '?v=' + Date.now())
    .then(r => { if(!r.ok) throw new Error('HTTP ' + r.status); return r.json(); })
    .then(data => {
      const stores = buildStores(data);

      renderCategories(stores);
      renderCards(stores);
      applyCategory('all');
    })
    .catch(err => console.error('Store data load error:', err));
});
    document.addEventListener('DOMContentLoaded', function() {
      const JSON_PATH = 'data/store.data.json';

      const btnCategories   = document.getElementById('btn-categories');
      const categoriesPanel = document.getElementById('categories-panel');
      const listContainer   = document.getElementById('categories-list-container');

      function buildStoreListFromData(data) {
        return Object.entries(data).map(([slug, store]) => {
          return {
            slug,
            name: store.title || store.name || slug,
            url: `store/${slug}/`
          };
        });
      }

      function loadCategories() {
        if (!listContainer) return;

        listContainer.innerHTML = '<div class="menu-status-msg">Loading...</div>';

        fetch(JSON_PATH + '?v=' + Date.now())
          .then(response => {
            if (!response.ok) throw new Error('HTTP ' + response.status);
            return response.json();
          })
          .then(data => {
            const storeList = buildStoreListFromData(data);

            if (!storeList || storeList.length === 0) {
              listContainer.innerHTML = '<div class="menu-status-msg">No stores found.</div>';
              return;
            }

            listContainer.innerHTML = '';
            storeList.forEach(store => {
              const link = document.createElement('a');
              link.href = store.url;
              link.className = 'cat-link';
              link.innerHTML = `${store.name}<span class="cat-arrow">›</span>`;
              listContainer.appendChild(link);
            });
          })
          .catch(error => {
            console.error('Kategoriler yüklenemedi:', error);
            listContainer.innerHTML =
              '<div class="menu-status-msg" style="color:red;">Error loading menu.<br><small>Check console.</small></div>';
          });
      }

      loadCategories();

      if (btnCategories && categoriesPanel) {
        btnCategories.addEventListener('click', function(e) {
          e.stopPropagation();
          const isActive = categoriesPanel.classList.contains('active');
          categoriesPanel.classList.toggle('active', !isActive);
          btnCategories.classList.toggle('active', !isActive);
        });

        document.addEventListener('click', function(e) {
          if (!categoriesPanel.contains(e.target) && !btnCategories.contains(e.target)) {
            categoriesPanel.classList.remove('active');
            btnCategories.classList.remove('active');
          }
        });
      }
    });
  </script>

</body>
</html>


