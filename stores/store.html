<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<base href="/rgztec/">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Store · RGZTEC</title>
<meta name="description" content="Developer store on RGZTEC — products, live demos and details.">
<link rel="stylesheet" href="assets/css/home.css">
<style>
  :root{
    --brand:#ff7d33; --brand2:#ff914d; --ink:#0d1220; --muted:#5b657a;
    --b:#e7ebf3; --tile:#fff7f2; --shadow:0 10px 30px rgba(0,0,0,.06);
  }
  .container{max-width:1180px;margin:0 auto;padding:0 18px}
  header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--b);z-index:10}
  .mast{display:flex;gap:12px;align-items:center;padding:10px 0}
  .pill.logo{font-weight:900}
  .search{display:flex;gap:8px;align-items:center;flex:1}
  .search input{height:42px;border:1px solid var(--b);border-radius:12px;padding:0 14px;flex:1;background:#fff}
  .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border:1px solid var(--b);border-radius:12px;background:#fff;font-weight:800;cursor:pointer;transition:transform .08s ease, box-shadow .08s ease}
  .btn:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
  .btn.primary{background:linear-gradient(180deg,var(--brand2),var(--brand));color:#fff;border-color:#ff8a3f}

  .crumbs{font-size:14px;color:var(--muted);padding:8px 0;border-bottom:1px solid var(--b);background:#f9fafc}
  .crumbs a{color:inherit}
  .banner{border:1px solid var(--b);border-radius:16px;overflow:hidden;box-shadow:var(--shadow);background:linear-gradient(180deg,#fff,#fff)}
  .banner .img{aspect-ratio:16/5;background:linear-gradient(180deg,#fff,#fff0), radial-gradient(900px 300px at 5% -10%, #fff 0, #fff 40%, #fff6 60%, #fff0 100%), var(--tile)}
  .banner img{width:100%;height:100%;object-fit:cover;display:block}

  .head{display:flex;justify-content:space-between;align-items:flex-end;gap:16px;margin-top:10px}
  .title h1{margin:0;font-size:clamp(24px,3.4vw,40px);letter-spacing:-.02em}
  .tags{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .chip{display:inline-flex;align-items:center;border:1px solid var(--b);background:#fff;border-radius:999px;padding:6px 10px;font-weight:800;font-size:12px}
  .tools{display:flex;gap:10px;flex-wrap:wrap}

  .filterbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:14px 0}
  .filterbar .chips{display:flex;gap:8px;flex-wrap:wrap}
  .filterbar input{height:40px;border:1px solid var(--b);border-radius:10px;padding:0 12px;background:#fff;flex:1;min-width:240px}

  .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fill,minmax(260px,1fr))}
  .card{background:#fff;border:1px solid var(--b);border-radius:14px;display:flex;flex-direction:column;overflow:hidden;min-height:360px;box-shadow:var(--shadow);transition:transform .08s ease, box-shadow .08s ease}
  .card:hover{transform:translateY(-2px);box-shadow:0 16px 40px rgba(0,0,0,.09)}
  .thumb{aspect-ratio:16/9;background:#f2f3f6}
  .thumb img{width:100%;height:100%;object-fit:cover}
  .body{padding:12px 14px;display:grid;gap:8px;grid-auto-rows:min-content}
  .title{font-weight:900}
  .desc{color:var(--muted);font-size:14px;min-height:44px}
  .meta{display:flex;justify-content:space-between;align-items:center}
  .price{font-weight:900}
  .actions{margin-top:auto;display:flex;gap:8px;flex-wrap:wrap}

  .footnote{color:var(--muted);font-size:13px;margin:18px 0}
  @media (max-width:900px){ .banner .img{aspect-ratio:16/7} }
</style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="container mast">
      <a class="pill logo" href="index.html">RGZTEC</a>
      <form class="search" action="products/index.html">
        <input type="search" name="q" placeholder="Search templates, UI kits, widgets…" aria-label="Search site">
        <button class="btn" type="submit">Search</button>
      </form>
      <nav class="top-links">
        <a class="btn" href="products/index.html">Explore</a>
        <a class="btn" href="demo/index.html">Demo Gallery</a>
        <a class="btn" href="stores/index.html">Stores</a>
        <a class="btn" href="login.html">Login</a>
        <a class="btn primary" href="advertise.html">Become a Seller</a>
      </nav>
    </div>
  </header>

  <!-- CRUMBS -->
  <div class="crumbs">
    <div class="container">
      <a href="index.html">Home</a> › <a href="stores/index.html">Stores</a> › <span id="crumbName">Store</span>
    </div>
  </div>

  <main class="container">
    <!-- BANNER -->
    <section class="banner" style="margin:16px 0">
      <div class="img"><img id="bannerImg" alt=""></div>
    </section>

    <!-- HEAD -->
    <section class="head">
      <div class="title">
        <h1 id="storeName">Store</h1>
        <div class="tags" id="storeTags"></div>
        <p id="storeDesc" class="footnote"></p>
        <p id="storeMeta" class="footnote"></p>
      </div>
      <div class="tools">
        <button class="btn" id="btnFollow">Follow</button>
        <button class="btn" id="btnShare">Share</button>
        <a class="btn" id="btnWebsite" target="_blank" rel="noopener">Open website</a>
      </div>
    </section>

    <!-- FILTERS -->
    <section class="filterbar">
      <div class="chips" id="stackChips"></div>
      <input id="q" type="search" placeholder="Search in this store…">
      <select id="sort" class="btn" style="height:40px">
        <option value="featured">Featured</option>
        <option value="price-asc">Price ↑</option>
        <option value="price-desc">Price ↓</option>
        <option value="az">A → Z</option>
      </select>
    </section>

    <!-- PRODUCTS -->
    <section>
      <div class="grid" id="grid"></div>
      <p class="footnote" id="count"></p>
    </section>
  </main>

  <script>
  /* ---------- Image fallback (webp→png→jpg) ---------- */
  document.addEventListener('error', function(e){
    const img = e.target;
    if(img.tagName !== 'IMG') return;
    const src = img.getAttribute('src') || '';
    if(src.endsWith('.webp'))      img.src = src.replace(/\.webp$/i, '.png');
    else if(src.endsWith('.png'))  img.src = src.replace(/\.png$/i, '.jpg');
  }, true);

  /* ---------- Data ---------- */
  const PRODUCTS = [
    {id:1, slug:'landing-starter-html',     title:'Landing Starter (HTML)', desc:'Hero, features, pricing and blog sections.', price:18, stack:['html'],  thumb:'images/catalog/html1.webp'},
    {id:2, slug:'dashboard-lite-html',      title:'Dashboard Lite (HTML)',  desc:'Sidebar + topbar & chart placeholders (vanilla JS).', price:24, stack:['js'],    thumb:'images/catalog/html2.webp'},
    {id:3, slug:'portfolio-mini',           title:'Portfolio Mini',         desc:'Single-page portfolio with project grid & contact.',  price:14, stack:['html'],  thumb:'images/catalog/html3.webp'},
    {id:4, slug:'blog-lite',                title:'Blog Lite',              desc:'List + single post layout with clean typography.',    price:12, stack:['html'],  thumb:'images/catalog/html4.webp'},
    {id:5, slug:'agency-starter',           title:'Agency Starter',         desc:'Services: cards, testimonials, pricing.',             price:16, stack:['css'],   thumb:'images/catalog/html5.webp'},
    {id:6, slug:'e-commerce-mini',          title:'E-commerce Mini',        desc:'Product grid, product detail and cart icons.',        price:22, stack:['html'],  thumb:'images/catalog/html6.webp'},
    {id:7, slug:'resume-card',              title:'Resume Card',            desc:'Single-page resume with skills & contact.',           price:9,  stack:['html'],  thumb:'images/catalog/html7.webp'},
    {id:8, slug:'product-list',             title:'Product List',           desc:'Filterable item list with grid/row views.',           price:11, stack:['html'],  thumb:'images/catalog/html8.webp'},
    {id:9, slug:'pricing-tables',           title:'Pricing Tables',         desc:'Clean pricing blocks with CTA.',                      price:8,  stack:['html'],  thumb:'images/catalog/html9.webp'},
    {id:10,slug:'contact-lite',             title:'Contact Lite',           desc:'Form, map placeholder & social links.',               price:7,  stack:['html'],  thumb:'images/catalog/html10.webp'},
    {id:17,slug:'react-components',         title:'React Components',       desc:'Cards, modals and tabs (markup only).',               price:15, stack:['react'], thumb:'images/catalog/html17.webp'},
    {id:18,slug:'svg-icons',                title:'SVG Icons',              desc:'Curated developer icon set (inlineable).',           price:6,  stack:['icons'], thumb:'images/catalog/html18.webp'},
    {id:19,slug:'email-templates',          title:'Email Templates',        desc:'Transactional email starter set.',                    price:9,  stack:['email'], thumb:'images/catalog/html19.webp'},
    // Free samples
    {id:102,slug:'react-starter-free',      title:'React Starter (Free)',   desc:'Minimal React shell with routing.',                  price:0,  stack:['react','free'], thumb:'images/catalog/html17.webp'},
    {id:103,slug:'icons-free-pack',         title:'Free Icons Pack',        desc:'Basic outline icons for prototypes.',                 price:0,  stack:['icons','free'], thumb:'images/catalog/html18.webp'},
    {id:104,slug:'email-free',              title:'Free Email Template',    desc:'Responsive transactional email base.',                price:0,  stack:['email','free'], thumb:'images/catalog/html19.webp'}
  ];

  const STORES = [
    {
      slug:'pixel-foundry',
      name:'Pixel Foundry',
      stacks:['html','css'],
      desc:'Clean HTML starters and utility CSS kits.',
      banner:'images/stores/pixel-foundry-banner.webp',
      website:'#',
      since:2021, rating:4.9, items:[1,2,4,6,7,8,9,10]
    },
    {
      slug:'widget-labs',
      name:'Widget Labs',
      stacks:['js','html'],
      desc:'Vanilla JS widgets and tiny plugins.',
      banner:'images/stores/widget-labs-banner.webp',
      website:'#',
      since:2022, rating:4.9, items:[2,8,10,9,7]
    },
    {
      slug:'react-craft',
      name:'React Craft',
      stacks:['react','html'],
      desc:'Production-ready components for React apps.',
      banner:'images/stores/react-craft-banner.webp',
      website:'#',
      since:2023, rating:4.7, items:[17,102,1,4]
    },
    {
      slug:'style-forge',
      name:'Style Forge',
      stacks:['css','html'],
      desc:'Utility-first CSS components and layout kits.',
      banner:'images/stores/style-forge-banner.webp',
      website:'#',
      since:2020, rating:4.6, items:[5,9,7,1]
    },
    {
      slug:'vector-supply',
      name:'Vector Supply',
      stacks:['icons'],
      desc:'SVG icons and UI assets for developers.',
      banner:'images/stores/vector-supply-banner.webp',
      website:'#',
      since:2021, rating:4.8, items:[18,103]
    },
    {
      slug:'mailbox-co',
      name:'Mailbox Co.',
      stacks:['email','html'],
      desc:'Responsive email bases & transactional templates.',
      banner:'images/stores/mailbox-co-banner.webp',
      website:'#',
      since:2021, rating:4.7, items:[19,104]
    }
  ];

  /* ---------- Helpers ---------- */
  const $ = sel => document.querySelector(sel);
  const $$ = sel => Array.from(document.querySelectorAll(sel));

  function chip(label){ const s=document.createElement('span'); s.className='chip'; s.textContent=label; return s; }

  function productCard(p){
    const el = document.createElement('article');
    el.className='card';
    el.innerHTML = `
      <a class="thumb" href="products/detail.html?id=${p.id}&slug=${p.slug}">
        <img src="${p.thumb}" alt="${p.title}">
      </a>
      <div class="body">
        <div class="title">${p.title}</div>
        <div class="desc">${p.desc}</div>
        <div class="meta"><div class="price">${p.price ? '$'+p.price : 'Free'}</div>
          <div>${p.stack.map(s=>`<span class="chip">${s.toUpperCase()}</span>`).join(' ')}</div>
        </div>
        <div class="actions">
          <a class="btn" href="demo/index.html?item=${p.id}&slug=${p.slug}" target="_blank" rel="noopener">Preview</a>
          <a class="btn" href="products/detail.html?id=${p.id}&slug=${p.slug}">Details</a>
          ${p.price===0
            ? `<a class="btn primary" href="products/detail.html?id=${p.id}&slug=${p.slug}#download">Download</a>`
            : `<a class="btn primary" href="cart.html?add=${p.id}">Add</a>`}
        </div>
      </div>`;
    return el;
  }

  /* ---------- Page init ---------- */
  (function(){
    const params = new URLSearchParams(location.search);
    const slug = params.get('slug') || '';
    const store = STORES.find(s=>s.slug===slug);

    // 404 guard
    if(!store){
      $('#storeName').textContent = 'Store';
      $('#storeDesc').textContent  = 'Store not found. Go back to the stores directory.';
      $('#bannerImg').alt = '';
      $('#count').textContent = '0 items';
      return;
    }

    // Head content
    $('#crumbName').textContent = store.name;
    $('#storeName').textContent = store.name;
    $('#storeDesc').textContent  = store.desc;
    $('#storeMeta').textContent  = `${store.items.length} items · ${store.rating.toFixed ? store.rating.toFixed(1) : store.rating}★ · Since ${store.since}`;
    $('#bannerImg').src = store.banner;
    $('#bannerImg').alt = `${store.name} banner`;
    const tags = $('#storeTags'); store.stacks.forEach(s=>tags.appendChild(chip(s.toUpperCase())));
    $('#btnWebsite').href = store.website || '#';

    // Stack chips
    const uniqueStacks = Array.from(new Set(store.items.flatMap(id => (PRODUCTS.find(p=>p.id===id)||{}).stack || [])));
    const chipsBox = $('#stackChips');
    const stacks = ['all', ...uniqueStacks, 'free'];
    stacks.forEach(s=>{
      const c = chip(s==='all' ? 'All' : s.toUpperCase());
      c.dataset.stack = s;
      c.addEventListener('click', ()=>{
        params.set('stack', s);
        history.replaceState(null,'',`?${params.toString()}`);
        render();
      });
      chipsBox.appendChild(c);
    });

    // Events
    $('#btnShare').addEventListener('click', async ()=>{
      const url = location.href;
      try{ await navigator.clipboard.writeText(url); alert('Link copied'); }
      catch{ prompt('Copy link:', url); }
    });
    $('#btnFollow').addEventListener('click', (e)=>{
      e.target.textContent = e.target.textContent === 'Follow' ? 'Following ✓' : 'Follow';
    });
    $('#q').addEventListener('input', ()=>{
      params.set('q', $('#q').value.trim());
      history.replaceState(null,'',`?${params.toString()}`);
      render();
    });
    $('#sort').addEventListener('change', ()=>{
      params.set('sort', $('#sort').value);
      history.replaceState(null,'',`?${params.toString()}`);
      render();
    });
    window.addEventListener('keydown', (e)=>{
      if(e.key==='/' && !/input|textarea/i.test(document.activeElement.tagName)){
        e.preventDefault(); $('#q').focus();
      }
    });

    function render(){
      const q = (params.get('q')||'').toLowerCase();
      const stack = (params.get('stack')||'all').toLowerCase();
      const sort = params.get('sort')||'featured';

      let list = store.items.map(id=>PRODUCTS.find(p=>p.id===id)).filter(Boolean);

      if(stack!=='all'){
        if(stack==='free'){ list = list.filter(p=>p.price===0); }
        else { list = list.filter(p=>p.stack.includes(stack)); }
      }
      if(q){ list = list.filter(p=> (p.title+p.desc).toLowerCase().includes(q)); }

      if(sort==='price-asc') list.sort((a,b)=>a.price-b.price);
      else if(sort==='price-desc') list.sort((a,b)=>b.price-a.price);
      else if(sort==='az') list.sort((a,b)=>a.title.localeCompare(b.title));
      // featured: store order

      const grid = $('#grid'); grid.innerHTML='';
      list.forEach(p=> grid.appendChild(productCard(p)));
      $('#count').textContent = `${list.length} item${list.length===1?'':'s'}`;
      $('#q').value = q;
      $('#sort').value = sort;
      // highlight active chip
      $$('#stackChips .chip').forEach(ch=>ch.style.outline = ch.dataset.stack===stack ? '2px solid #ffb288' : '0');
    }

    // init from URL
    render();
  })();
  </script>
</body>
</html>
