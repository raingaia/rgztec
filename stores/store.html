<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <base href="/rgztec/">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Store · RGZTEC</title>
  <meta name="description" content="Store page with banner, meta, filters and products.">
  <style>
    :root{
      --brand:#ff7d33; --brand2:#ff914d; --brand-ink:#fff;
      --bg:#f7f8fb; --ink:#0d1220; --muted:#5b657a;
      --b:#e7ebf3; --b2:#dfe4ee; --shadow:0 10px 30px rgba(0,0,0,.06);
      --tile:#fff7f2;
    }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,Arial;color:var(--ink);background:#fff}
    a{color:inherit;text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}
    .pill{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--b);border-radius:999px;padding:8px 12px;background:#fff;font-weight:800}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--b);border-radius:12px;padding:10px 14px;background:#fff;font-weight:800;cursor:pointer;transition:.12s}
    .btn:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
    .btn.primary{background:linear-gradient(180deg,var(--brand2),var(--brand));border-color:#ff8a3f;color:#fff}
    header .mast{display:flex;gap:12px;align-items:center;padding:12px 0}
    header .searchbar{display:flex;gap:8px;align-items:center;flex:1}
    header .searchbar input{height:42px;border:1px solid var(--b);border-radius:12px;padding:0 14px;background:#fff;flex:1}

    .banner{aspect-ratio:21/7;background:linear-gradient(180deg,#fff,#fff2ea);border:1px solid var(--b);border-radius:16px;margin:10px 0;overflow:hidden;box-shadow:var(--shadow)}
    .banner img{width:100%;height:100%;object-fit:cover}

    .headline{display:flex;align-items:center;justify-content:space-between;gap:10px}
    h1{font-size:clamp(26px,3.2vw,38px);margin:12px 0 0}
    .muted{color:var(--muted)}
    .chips{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0}
    .chip{display:inline-flex;align-items:center;border:1px solid var(--b);background:#fff;border-radius:999px;padding:7px 12px;font-weight:800}
    .chip.active{background:var(--tile);border-color:#ffc8a6}

    .toolbar{display:flex;gap:10px;align-items:center;justify-content:space-between;margin:12px 0}
    .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));margin:8px 0 40px}
    .card{background:#fff;border:1px solid var(--b);border-radius:14px;overflow:hidden;box-shadow:var(--shadow);display:flex;flex-direction:column;transition:.12s}
    .card:hover{transform:translateY(-2px);box-shadow:0 16px 40px rgba(0,0,0,.09)}
    .thumb{aspect-ratio:16/9;background:#f2f3f6}
    .thumb img{width:100%;height:100%;object-fit:cover}
    .body{padding:12px 14px;display:grid;gap:8px}
    .title{font-weight:900}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .price{font-weight:900}
    .footnote{color:var(--muted);font-size:13px;margin:22px 0}
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="container mast">
      <a class="pill" href="index.html">RGZTEC</a>
      <form class="searchbar" action="products/index.html">
        <input type="search" name="q" placeholder="Search templates, UI kits, widgets…" />
        <button class="btn" type="submit">Search</button>
      </form>
      <nav>
        <a class="btn" href="stores/index.html">Stores</a>
        <a class="btn" href="demo/index.html">Demo Gallery</a>
        <a class="btn primary" href="advertise.html">Become a Seller</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="banner" id="banner"><img id="bannerImg" alt="Store banner"></div>

    <div class="headline">
      <div>
        <h1 id="storeName">Store</h1>
        <div class="chips" id="storeStacks"></div>
        <p class="muted" id="storeDesc"></p>
        <p class="muted" id="storeMeta"></p>
      </div>
      <div class="actions">
        <button class="btn" id="btnFollow">Follow</button>
        <button class="btn" id="btnShare">Share</button>
        <a class="btn" id="btnWebsite" target="_blank" rel="noopener">Open website</a>
      </div>
    </div>

    <!-- Local filters -->
    <div class="chips" id="stackFilter"></div>
    <div class="toolbar">
      <input class="pill" id="q" placeholder="Search in this store… (Press / to focus)">
      <select class="pill" id="sort">
        <option value="featured">Featured</option>
        <option value="price-asc">Price ↑</option>
        <option value="price-desc">Price ↓</option>
        <option value="alpha">A → Z</option>
      </select>
    </div>

    <section class="grid" id="grid" aria-live="polite"></section>
    <p class="footnote">Tip: press <b>/</b> to focus search • Images auto-fallback from WebP→PNG→JPG.</p>
  </main>

  <script>
    // ---------- Store data (same slugs as list) ----------
    const STORES = [
      { slug:'pixel-foundry', name:'Pixel Foundry', stacks:['html','css'], since:2021, items:42, rating:4.9, top:true, website:'https://example.com/pixel', desc:'Clean HTML starters and utility CSS kits.', banner:'images/stores/pixel-foundry-banner.webp',
        products:[
          {id:1, slug:'landing-starter-html', title:'Landing Starter (HTML)', desc:'Hero, features, pricing and blog sections.', price:18, tag:'html', img:'images/catalog/html1.webp'},
          {id:5, slug:'agency-starter', title:'Agency Starter', desc:'Services: cards, testimonials, pricing.', price:16, tag:'html', img:'images/catalog/html5.webp'},
          {id:9, slug:'pricing-tables', title:'Pricing Tables', desc:'3–4 column pricing with featured plan.', price:8, tag:'html', img:'images/catalog/html9.webp'},
          {id:7, slug:'resume-card', title:'Resume Card', desc:'Single-page resume with skills & contact.', price:9, tag:'html', img:'images/catalog/html7.webp'},
        ]
      },
      { slug:'widget-labs', name:'Widget Labs', stacks:['js','html'], since:2022, items:18, rating:4.9, website:'https://example.com/widgetlabs', desc:'Vanilla JS widgets and tiny plugins.', banner:'images/stores/widget-labs-banner.webp',
        products:[
          {id:20, slug:'js-widgets', title:'JS Widgets', desc:'Tabs, accordions and tooltips (vanilla).', price:11, tag:'js', img:'images/catalog/html20.webp'},
          {id:11, slug:'faq-mini', title:'FAQ Mini', desc:'Accordion FAQ with categories and search.', price:6, tag:'js', img:'images/catalog/html11.webp'},
          {id:8, slug:'product-list', title:'Product List', desc:'Filterable list with grid/row views.', price:11, tag:'html', img:'images/catalog/html8.webp'},
          {id:10, slug:'contact-lite', title:'Contact Lite', desc:'Form, map placeholder & social links.', price:7, tag:'html', img:'images/catalog/html10.webp'},
        ]
      },
      { slug:'react-craft', name:'React Craft', stacks:['react','html'], since:2023, items:12, rating:4.7, website:'https://example.com/reactcraft', desc:'Production-ready components for React apps.', banner:'images/stores/react-craft-banner.webp',
        products:[
          {id:17, slug:'react-components', title:'React Components', desc:'Cards, modals and tabs (markup only).', price:15, tag:'react', img:'images/catalog/html17.webp'},
          {id:102, slug:'react-starter-free', title:'React Starter (Free)', desc:'Minimal React shell with routing.', price:0, tag:'react', img:'images/catalog/html17.webp'},
          {id:6, slug:'e-commerce-mini', title:'E-commerce Mini', desc:'Product grid, product detail and cart icons.', price:22, tag:'html', img:'images/catalog/html6.webp'},
          {id:4, slug:'blog-lite', title:'Blog Lite', desc:'Clean typography with list + single post.', price:12, tag:'html', img:'images/catalog/html4.webp'},
        ]
      },
      { slug:'style-forge', name:'Style Forge', stacks:['css','html'], since:2020, items:15, rating:4.6, website:'https://example.com/styleforge', desc:'Utility-first CSS components and layout kits.', banner:'images/stores/style-forge-banner.webp',
        products:[
          {id:9, slug:'pricing-tables', title:'Pricing Tables', desc:'Clean pricing blocks with CTA.', price:8, tag:'html', img:'images/catalog/html9.webp'},
          {id:12, slug:'gallery-grid', title:'Gallery Grid', desc:'Masonry/grid gallery (lightbox placeholder).', price:13, tag:'html', img:'images/catalog/html12.webp'},
          {id:5, slug:'agency-starter', title:'Agency Starter', desc:'Services: cards, testimonials, pricing.', price:16, tag:'css', img:'images/catalog/html5.webp'},
        ]
      },
      { slug:'vector-supply', name:'Vector Supply', stacks:['icons'], since:2019, items:23, rating:4.8, website:'https://example.com/vectorsupply', desc:'SVG icons and UI assets for developers.', banner:'images/stores/vector-supply-banner.webp',
        products:[
          {id:18, slug:'svg-icons', title:'SVG Icons', desc:'Curated developer icon set (inlineable).', price:6, tag:'icons', img:'images/catalog/html18.webp'},
          {id:103, slug:'icons-free-pack', title:'Free Icons Pack', desc:'Basic outline icons for prototypes.', price:0, tag:'icons', img:'images/catalog/html18.webp'},
          {id:1, slug:'landing-starter-html', title:'Landing Starter', desc:'Fast HTML base for marketing pages.', price:18, tag:'html', img:'images/catalog/html1.webp'},
        ]
      },
      { slug:'mailbox-co', name:'Mailbox Co.', stacks:['email','html'], since:2022, items:14, rating:4.5, website:'https://example.com/mailbox', desc:'Responsive email bases & transactional templates.', banner:'images/stores/mailbox-co-banner.webp',
        products:[
          {id:19, slug:'email-templates', title:'Email Templates', desc:'Transactional email starter set.', price:9, tag:'email', img:'images/catalog/html19.webp'},
          {id:104, slug:'email-free', title:'Free Email Template', desc:'Responsive transactional email base.', price:0, tag:'email', img:'images/catalog/html19.webp'},
          {id:3, slug:'portfolio-mini', title:'Portfolio Mini', desc:'One-page portfolio with grid & contact.', price:14, tag:'html', img:'images/catalog/html3.webp'}
        ]
      }
    ];

    // ---- Helpers ----
    const $ = (s,root=document)=>root.querySelector(s);
    const $$ = (s,root=document)=>[...root.querySelectorAll(s)];
    const money = v => v===0 ? 'Free' : `$${v}`;
    function esc(s){ return (s||'').toLowerCase(); }

    // Image fallback
    addEventListener('error', e=>{
      const img = e.target;
      if(img.tagName!=='IMG') return;
      img.onerror = null;
      const src = img.getAttribute('src')||'';
      if(src.endsWith('.webp')) img.src = src.replace(/\.webp$/i,'.png');
      else if(src.endsWith('.png')) img.src = src.replace(/\.png$/i,'.jpg');
    }, true);

    // ---- Init ----
    (function init(){
      const u = new URL(location.href);
      let slug = (u.searchParams.get('slug') || location.hash.replace('#','') || '').toLowerCase();
      if(!slug) slug = 'pixel-foundry'; // fallback

      const store = STORES.find(s=>s.slug===slug);
      if(!store){ document.title='Store not found'; $('#storeName').textContent='Store not found'; return; }

      // Headline
      document.title = `${store.name} · Store · RGZTEC`;
      $('#storeName').textContent = store.name;
      $('#storeDesc').textContent = store.desc;
      $('#storeMeta').textContent = `${store.items} items · Since ${store.since} · ${store.rating.toFixed(1)}★`;
      $('#bannerImg').src = store.banner;
      $('#bannerImg').alt = `${store.name} banner`;
      $('#btnWebsite').href = store.website || '#';
      if(!store.website) $('#btnWebsite').classList.add('muted');

      // Stacks under title
      $('#storeStacks').innerHTML = store.stacks.map(t=>`<span class="chip">${t.toUpperCase()}</span>`).join('');

      // Local stack filter chips + Free
      const availTags = [...new Set(store.products.map(p=>p.tag))];
      const chips = ['all', ...availTags, 'free'];
      $('#stackFilter').innerHTML = chips.map(t=>`<button class="chip" data-tag="${t}">${t.toUpperCase()}</button>`).join('');
      $('#stackFilter .chip').classList.add('active');

      // Control events
      $('#btnShare').addEventListener('click', async ()=>{
        try{
          await navigator.clipboard.writeText(location.href);
          $('#btnShare').textContent='Copied!';
          setTimeout(()=>$('#btnShare').textContent='Share', 1200);
        }catch(e){ alert('Link copied: ' + location.href); }
      });
      $('#btnFollow').addEventListener('click', ()=>{
        $('#btnFollow').textContent = $('#btnFollow').textContent==='Follow' ? 'Following' : 'Follow';
      });

      // Search & sort & chips
      const q = $('#q'), sort = $('#sort');
      $('#stackFilter').addEventListener('click', (e)=>{
        const b = e.target.closest('.chip'); if(!b) return;
        $$('#stackFilter .chip').forEach(x=>x.classList.remove('active'));
        b.classList.add('active'); render();
      });
      q.addEventListener('input', render);
      sort.addEventListener('change', render);
      window.addEventListener('keydown', (e)=>{
        if(e.key==='/' && !/input|textarea/i.test(document.activeElement.tagName)){
          e.preventDefault(); q.focus();
        }
      });

      function render(){
        const tag = $('#stackFilter .chip.active')?.dataset.tag || 'all';
        const query = esc(q.value.trim());
        const order = sort.value;

        let list = store.products.slice();
        if(tag!=='all'){
          if(tag==='free') list = list.filter(p=>p.price===0);
          else list = list.filter(p=>p.tag===tag);
        }
        if(query) list = list.filter(p=> esc(p.title+' '+p.desc).includes(query));

        switch(order){
          case 'price-asc': list.sort((a,b)=>a.price-b.price); break;
          case 'price-desc': list.sort((a,b)=>b.price-a.price); break;
          case 'alpha': list.sort((a,b)=>a.title.localeCompare(b.title)); break;
          default: /* featured */ list.sort((a,b)=>(a.price===0? -1:0) - (b.price===0? -1:0));
        }

        $('#grid').innerHTML = list.map(p=>`
          <article class="card">
            <a class="thumb" href="products/detail.html?id=${p.id}&slug=${p.slug}">
              <img src="${p.img}" alt="${p.title}">
            </a>
            <div class="body">
              <a class="title" href="products/detail.html?id=${p.id}&slug=${p.slug}">${p.title}</a>
              <div class="muted">${p.desc}</div>
              <div class="meta">
                <span class="muted">${p.tag.toUpperCase()}</span>
                <span class="price">${money(p.price)}</span>
              </div>
              <div class="actions" style="display:flex;gap:8px;flex-wrap:wrap;margin-top:6px">
                <a class="btn" href="demo/index.html?item=${p.id}&slug=${p.slug}" target="_blank" rel="noopener">Preview</a>
                <a class="btn" href="products/detail.html?id=${p.id}&slug=${p.slug}">Details</a>
                <a class="btn primary" href="cart.html?add=${p.id}">${p.price===0?'Download':'Add'}</a>
              </div>
            </div>
          </article>
        `).join('') || `<p class="muted">No products matched your filters.</p>`;
      }

      render();
    })();
  </script>
</body>
</html>
