<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RGZTEC – Product</title>
  <link rel="stylesheet" href="/rgztec/assets/css/main.css" />
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;background:#f7f7fb;margin:0}
    .wrap{max-width:1100px;margin:auto;padding:24px}
    .back{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border-radius:10px;border:1px solid #e5e7eb;background:#fff;text-decoration:none}
    .layout{display:grid;grid-template-columns:1.2fr 1fr;gap:28px;margin-top:20px}
    .panel{background:#fff;border-radius:18px;border:1px solid #eee;box-shadow:0 6px 20px rgba(0,0,0,.06)}
    .panel.pad{padding:18px}
    .media{aspect-ratio:16/10;display:flex;align-items:center;justify-content:center;background:#eef2f7;border-radius:14px;overflow:hidden}
    .media img{width:100%;height:100%;object-fit:cover;display:none}
    .ghost{display:flex;align-items:center;justify-content:center;color:#94a3b8;font-weight:700}
    .title{font-size:28px;font-weight:800;margin:0 0 10px}
    .muted{color:#6b7280}
    .row{display:flex;gap:12px;align-items:center}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;height:44px;padding:0 16px;border-radius:999px;border:1px solid #e5e7eb;background:#fff;font-weight:700;text-decoration:none}
    .btn.primary{background:#ff6a3d;border-color:#ff6a3d;color:#fff}
    .btn[aria-disabled="true"]{pointer-events:none;opacity:.55}
    .price{font-size:22px;font-weight:800}
    .note{font-size:12px;color:#6b7280;margin-top:10px}
    @media (max-width:960px){.layout{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <main class="wrap">
    <a class="back" href="/rgztec/catalog/">← Back to Category</a>

    <section class="layout">
      <!-- Sol: Görsel -->
      <div class="panel pad">
        <div class="media">
          <div class="ghost" id="ghostLabel">G&ouml;rsel bulunamad&#305;</div>
          <img id="product-image" alt="">
        </div>
      </div>

      <!-- Sağ: İçerik -->
      <div class="panel pad">
        <h1 class="title" id="product-title">Product</h1>
        <p class="muted" id="product-desc">Template details and features.</p>

        <div class="row" style="margin:16px 0 6px">
          <a id="btn-demo" class="btn" aria-disabled="true">Live Demo</a>
          <a id="btn-store" class="btn primary" aria-disabled="true">Create your store</a>
          <div class="price" id="product-price" style="margin-left:auto"></div>
        </div>

        <p class="note">Not: Demo ve ma&#287;aza linkleri se&ccedil;ti&#287;iniz &uuml;r&uuml;ne g&ouml;re otomatik ayarlan&#305;r.</p>
      </div>
    </section>
  </main>

  <script>
    // URL param
    const params = new URLSearchParams(location.search);
    const slug = params.get("item");
    if (!slug) location.replace("/rgztec/catalog/");

    // --- Akıllı görsel çözümleyici ---
    // Verilen aday yolları sırayla dener; yüklenen ilkini kullanır.
    function resolveImage(candidates, onDone) {
      if (!candidates || !candidates.length) return onDone(null);
      const tryOne = (i) => {
        if (i >= candidates.length) return onDone(null);
        const url = candidates[i];
        const img = new Image();
        img.onload = () => onDone(url);
        img.onerror = () => tryOne(i + 1);
        img.src = url;
      };
      tryOne(0);
    }

    // Ürün veritabanı (slug -> bilgiler + görsel aday listesi)
    const base = "/rgztec";
    const DB = {
      // Landing Page
      "landing-page": {
        title: "Landing Page Starter",
        desc: "Responsive, lightweight HTML/CSS starter landing page.",
        price: 19,
        // Sırasıyla dener: isimli -> numaralı -> png
        images: [
          `${base}/images/landing-page.webp`,
          `${base}/images/html1.webp`,
          `${base}/images/landing-page.png`
        ],
        demo:  `${base}/demo/detail.html?p=landing-page`,
        store: `${base}/stores/index.html?p=landing-page`
      },
      "landing-page-starter": { aliasOf: "landing-page" },

      // Portfolio
      "portfolio-showcase": {
        title: "Portfolio Showcase",
        desc: "Clean portfolio template with filters and responsive grid.",
        price: 25,
        images: [
          `${base}/images/portfolio.webp`,
          `${base}/images/html2.webp`,
          `${base}/images/portfolio.png`
        ],
        demo:  `${base}/demo/detail.html?p=portfolio-showcase`,
        store: `${base}/stores/index.html?p=portfolio-showcase`
      },

      // Admin Dashboard
      "admin-dashboard": {
        title: "Admin Dashboard UI",
        desc: "Modern admin dashboard with cards, charts and tables.",
        price: 49,
        images: [
          `${base}/images/dashboard.webp`,
          `${base}/images/html3.webp`,
          `${base}/images/admin-dashboard.webp`,
          `${base}/images/dashboard.png`
        ],
        demo:  `${base}/demo/detail.html?p=admin-dashboard`,
        store: `${base}/stores/index.html?p=admin-dashboard`
      },
      "admin-dashboard-ui": { aliasOf: "admin-dashboard" },

      // E-commerce
      "ecommerce-homepage": {
        title: "E-commerce Homepage",
        desc: "E-commerce landing with hero, categories and product grid.",
        price: 39,
        images: [
          `${base}/images/ecommerce.webp`,
          `${base}/images/html4.webp`,
          `${base}/images/ecommerce.png`
        ],
        demo:  `${base}/demo/detail.html?p=ecommerce-homepage`,
        store: `${base}/stores/index.html?p=ecommerce-homepage`
      }
    };

    // Alias çöz
    const meta = DB[slug] && DB[slug].aliasOf ? DB[DB[slug].aliasOf] : DB[slug];

    // DOM
    const $title = document.getElementById("product-title");
    const $desc  = document.getElementById("product-desc");
    const $img   = document.getElementById("product-image");
    const $ghost = document.getElementById("ghostLabel");
    const $price = document.getElementById("product-price");
    const $demo  = document.getElementById("btn-demo");
    const $store = document.getElementById("btn-store");

    function disableButtons(){[$demo,$store].forEach(b=>{b.removeAttribute("href");b.setAttribute("aria-disabled","true");});}
    function enableButtons(){[$demo,$store].forEach(b=>b.removeAttribute("aria-disabled"));}

    if (!meta) {
      $title.textContent = "Product not found";
      $desc.textContent  = "We couldn't find the product you are looking for.";
      $price.textContent = "";
      disableButtons();
    } else {
      $title.textContent = meta.title;
      $desc.textContent  = meta.desc;
      $price.textContent = `$${meta.price}`;

      // Görseli sırayla dene
      resolveImage(meta.images, (url) => {
        if (url) {
          $img.onload = () => { $ghost.style.display = "none"; $img.style.display = "block"; };
          $img.onerror = () => { $img.style.display = "none"; $ghost.style.display = "flex"; };
          $img.src = url;
        } else {
          $img.style.display = "none";
          $ghost.style.display = "flex";
        }
      });

      // Linkler
      $demo.href  = meta.demo;  $demo.target = "_blank"; $demo.rel = "noopener";
      $store.href = meta.store;
      enableButtons();
    }
  </script>
</body>
</html>

