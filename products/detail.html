<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <base href="/rgztec/">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RGZTEC · Product Detail</title>
  <meta name="description" content="Product details, live preview link, specifications and related items.">
  <link rel="stylesheet" href="assets/css/home.css" />
  <link rel="stylesheet" href="assets/css/categories.css" />
  <style>
    .layout{display:grid;grid-template-columns:1.1fr .9fr;gap:16px}
    @media (max-width:980px){.layout{grid-template-columns:1fr}}
    .gallery{background:#fff;border:1px solid var(--b);border-radius:16px;overflow:hidden;box-shadow:var(--shadow)}
    .gallery .thumb{aspect-ratio:16/9;background:#f2f3f6}
    .info{background:#fff;border:1px solid var(--b);border-radius:16px;padding:18px;box-shadow:var(--shadow)}
    .price-lg{font-size:clamp(18px,3vw,28px);font-weight:900}
    .muted-row{display:flex;gap:10px;flex-wrap:wrap;color:var(--muted)}
    .kvs{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px}
    .kv{border:1px dashed var(--b2);border-radius:10px;padding:8px 10px}
    .tabs{display:flex;gap:8px;border-bottom:1px solid var(--b);margin-top:12px}
    .tabs a{padding:8px 10px;border-radius:10px}
    .tabs a.active{background:#f6f8fc;border:1px solid var(--b)}
    .pane{padding:12px 0}
    .aside{display:grid;gap:12px}
    .seller{background:#fff;border:1px solid var(--b);border-radius:16px;padding:14px;box-shadow:var(--shadow)}
    .related .section-head{margin-top:18px}
  </style>
</head>
<body>
  <!-- Header v2 -->
  <header class="header-v2">
    <div class="container bar">
      <a class="brand" href="index.html"><span class="logo-dot">RGZTEC</span></a>
      <a class="btn pill ghost" href="products/index.html">Categories</a>
      <form id="navSearch" class="searchbar" role="search" aria-label="Search">
        <input id="navQ" type="search" placeholder="Search templates, UI kits, widgets…" />
        <button class="btn" type="submit">Search</button>
      </form>
      <nav class="main">
        <a href="catalog/index.html">Explore</a>
        <a href="demo/index.html">Demo Gallery</a>
        <a class="btn" href="login.html">Login</a>
        <a class="btn primary" href="advertise.html">Become a Seller</a>
      </nav>
    </div>
    <div class="subnav">
      <div class="container rail">
        <a href="products/category.html?cat=html">Landing Pages</a>
        <a href="products/category.html?cat=admin">Admin Dashboards</a>
        <a href="products/react.html">React Components</a>
        <a href="products/js-widgets.html">JS Widgets</a>
        <a href="products/svg-icons.html">SVG Icons</a>
        <a href="products/email-templates.html">Email Templates</a>
        <a href="products/category.html#freebies">Freebies</a>
      </div>
    </div>
  </header>

  <main class="container" style="margin:18px 0">
    <!-- Breadcrumbs -->
    <nav class="breadcrumbs" aria-label="Breadcrumb">
      <a href="index.html">Home</a> ›
      <a href="products/index.html">Catalog</a> ›
      <span id="bcCat">Product</span>
    </nav>

    <div class="layout">
      <!-- LEFT: gallery + tabs -->
      <section class="gallery">
        <a class="thumb" id="mainImgLink" target="_blank" rel="noopener">
          <img id="mainImg" src="" alt="" loading="lazy" decoding="async" data-fallback="">
        </a>

        <div class="tabs" role="tablist" aria-label="Product sections">
          <a href="#details" id="tab-details" class="active" role="tab" aria-controls="pane-details" aria-selected="true">Details</a>
          <a href="#specs" id="tab-specs" role="tab" aria-controls="pane-specs" aria-selected="false">Specs</a>
          <a href="#changelog" id="tab-changelog" role="tab" aria-controls="pane-changelog" aria-selected="false">Changelog</a>
        </div>

        <div id="pane-details" class="pane" role="tabpanel" aria-labelledby="tab-details">
          <p id="desc">—</p>
          <ul class="bullets">
            <li>Clean, semantic markup</li>
            <li>Responsive layout, optimized assets</li>
            <li>Quick-start README</li>
          </ul>
        </div>

        <div id="pane-specs" class="pane hide" role="tabpanel" aria-labelledby="tab-specs">
          <div class="kvs">
            <div class="kv"><strong>Tech</strong><div id="tech">HTML/CSS/JS</div></div>
            <div class="kv"><strong>Category</strong><div id="cat">HTML</div></div>
            <div class="kv"><strong>Version</strong><div id="ver">1.0.0</div></div>
            <div class="kv"><strong>Updated</strong><div id="updated">—</div></div>
          </div>
        </div>

        <div id="pane-changelog" class="pane hide" role="tabpanel" aria-labelledby="tab-changelog">
          <pre id="changelogText">Initial release.</pre>
        </div>
      </section>

      <!-- RIGHT: info & actions -->
      <aside class="aside">
        <section class="info">
          <h1 id="title" class="mt-0">Product</h1>
          <div class="muted-row">
            <span class="badge" id="catBadge">HTML</span>
            <span class="pill">Curated</span>
            <span class="pill success hide" id="freeBadge">Free</span>
          </div>

          <div class="row mt-12">
            <div class="price-lg" id="price">$—</div>
            <div class="spacer"></div>
            <a id="preview" class="btn" target="_blank" rel="noopener">Live Demo</a>
            <a id="addToCart" class="btn primary">Add to cart</a>
          </div>

          <p class="mt-12 muted" id="short">—</p>

          <div class="kvs mt-12">
            <div class="kv"><strong>Slug</strong><div id="slug">—</div></div>
            <div class="kv"><strong>Product ID</strong><div id="pid">—</div></div>
          </div>
        </section>

        <section class="seller">
          <div class="row">
            <div class="avatar-wrap" style="position:relative;width:56px;height:56px;border-radius:999px;overflow:hidden;border:2px solid #fff;box-shadow:var(--shadow)">
              <img src="images/catalog/html1.webp" alt="Seller avatar" loading="lazy" decoding="async" data-fallback="images/catalog/html1.png">
            </div>
            <div>
              <strong>RGZTEC Publisher</strong>
              <div class="muted">Trusted seller · 100% rating</div>
              <div class="row mt-8">
                <a class="btn" href="stores/index.html">Visit store</a>
                <a class="btn" href="advertise.html">Promote your product</a>
              </div>
            </div>
          </div>
        </section>
      </aside>
    </div>

    <!-- Related -->
    <section class="related section">
      <div class="section-head">
        <h2 class="section-title">Related Products</h2>
        <a class="btn" href="products/category.html">View all</a>
      </div>
      <div class="grid">
        <article class="card">
          <a class="thumb" href="products/detail.html?id=2&slug=dashboard-lite-html">
            <img src="images/catalog/html2.webp" data-fallback="images/catalog/html2.png" alt="Dashboard Lite (HTML)" loading="lazy" decoding="async">
          </a>
          <div class="body">
            <div class="title">Dashboard Lite (HTML)</div>
            <p class="desc">Sidebar, topbar and chart placeholders; vanilla JS.</p>
            <div class="meta"><div class="price">$24</div><span class="muted">JS</span></div>
            <div class="actions">
              <a class="btn" target="_blank" rel="noopener" href="images/catalog/html2.html">Preview</a>
              <a class="btn" href="products/detail.html?id=2&slug=dashboard-lite-html">Details</a>
              <a class="btn primary" href="cart.html?add=2">Add</a>
            </div>
          </div>
        </article>

        <article class="card">
          <a class="thumb" href="products/detail.html?id=3&slug=portfolio-mini">
            <img src="images/catalog/html3.webp" data-fallback="images/catalog/html3.png" alt="Portfolio Mini" loading="lazy" decoding="async">
          </a>
          <div class="body">
            <div class="title">Portfolio Mini</div>
            <p class="desc">Single-page portfolio with project grid and contact form.</p>
            <div class="meta"><div class="price">$14</div><span class="muted">HTML</span></div>
            <div class="actions">
              <a class="btn" target="_blank" rel="noopener" href="images/catalog/html3.html">Preview</a>
              <a class="btn" href="products/detail.html?id=3&slug=portfolio-mini">Details</a>
              <a class="btn primary" href="cart.html?add=3">Add</a>
            </div>
          </div>
        </article>

        <article class="card">
          <a class="thumb" href="products/detail.html?id=6&slug=e-commerce-mini">
            <img src="images/catalog/html6.webp" data-fallback="images/catalog/html6.png" alt="E-commerce Mini" loading="lazy" decoding="async">
          </a>
          <div class="body">
            <div class="title">E-commerce Mini</div>
            <p class="desc">Product grid, product detail and cart icons.</p>
            <div class="meta"><div class="price">$22</div><span class="muted">HTML</span></div>
            <div class="actions">
              <a class="btn" target="_blank" rel="noopener" href="images/catalog/html6.html">Preview</a>
              <a class="btn" href="products/detail.html?id=6&slug=e-commerce-mini">Details</a>
              <a class="btn primary" href="cart.html?add=6">Add</a>
            </div>
          </div>
        </article>

        <article class="card">
          <a class="thumb" href="products/detail.html?id=18&slug=svg-icons">
            <img src="images/catalog/html18.webp" data-fallback="images/catalog/html18.png" alt="SVG Icons" loading="lazy" decoding="async">
          </a>
          <div class="body">
            <div class="title">SVG Icons</div>
            <p class="desc">Curated developer icon set (inlineable).</p>
            <div class="meta"><div class="price">$6</div><span class="muted">Icons</span></div>
            <div class="actions">
              <a class="btn" target="_blank" rel="noopener" href="images/catalog/html18.html">Preview</a>
              <a class="btn" href="products/detail.html?id=18&slug=svg-icons">Details</a>
              <a class="btn primary" href="cart.html?add=18">Add</a>
            </div>
          </div>
        </article>
      </div>
    </section>
  </main>

  <footer class="container" style="margin:28px 0;color:#6b7280">
    <small>© <span id="year"></span> RGZTEC — All rights reserved.</small>
  </footer>

  <script src="assets/js/main.js"></script>
  <script>
    /* Product page data hydration
       - Reads ?id=&slug= from URL
       - Tries to fetch assets/data/products.json (optional). If missing, falls back to built-ins.
       - Sets title, price, category, image, demo, etc.
       - Tabs behavior + Add to cart button.
    */
    (async function(){
      const $  = (s,root=document)=>root.querySelector(s);
      const $$ = (s,root=document)=>Array.from(root.querySelectorAll(s));
      const params = new URL(location.href).searchParams;
      const id   = params.get('id') || '0';
      const slug = params.get('slug') || '';

      const titleEl = $('#title');
      const priceEl = $('#price');
      const catBadge = $('#catBadge');
      const freeBadge = $('#freeBadge');
      const shortEl = $('#short');
      const descEl = $('#desc');
      const catEl = $('#cat');
      const techEl = $('#tech');
      const pidEl = $('#pid');
      const slugEl = $('#slug');
      const updatedEl = $('#updated');
      const preview = $('#preview');
      const addBtn = $('#addToCart');
      const bcCat = $('#bcCat');
      const mainImg = $('#mainImg');
      const mainLink = $('#mainImgLink');

      // simple built-in map (used if products.json is absent)
      const FALLBACKS = {
        1:{title:'Landing Starter (HTML)', cat:'HTML', price:18, desc:'Minimal landing with hero, features, pricing and blog sections.', tech:'HTML/CSS/JS'},
        2:{title:'Dashboard Lite (HTML)',  cat:'JS',   price:24, desc:'Sidebar, topbar and chart placeholders; vanilla JS.',            tech:'HTML/CSS/JS'},
        3:{title:'Portfolio Mini',         cat:'HTML', price:14, desc:'Single-page portfolio with project grid and contact form.',      tech:'HTML/CSS/JS'},
        4:{title:'Blog Lite',              cat:'HTML', price:12, desc:'List + single post with clean typography.',                      tech:'HTML/CSS/JS'},
        5:{title:'Agency Starter',         cat:'HTML', price:16, desc:'Services: cards, testimonials, pricing.',                        tech:'HTML/CSS/JS'},
        6:{title:'E-commerce Mini',        cat:'HTML', price:22, desc:'Product grid, product detail and cart icons.',                   tech:'HTML/CSS/JS'},
        17:{title:'React Components',      cat:'React',price:15, desc:'Cards, modals and tabs (markup only).',                          tech:'React + CSS'},
        18:{title:'SVG Icons',             cat:'Icons',price:6,  desc:'Curated developer icon set (inlineable).',                       tech:'SVG/HTML/CSS'},
        19:{title:'Email Templates',       cat:'Email',price:9,  desc:'Transactional email starter set.',                               tech:'MJML/HTML/CSS'},
        20:{title:'JS Widgets',            cat:'JS',   price:11, desc:'Tabs, accordions and tooltips (vanilla).',                       tech:'HTML/CSS/JS'}
      };

      const imgBase = `images/catalog/html${encodeURIComponent(id)}.webp`;
      const imgFallback = imgBase.replace(/\.webp$/, '.png');
      mainImg.src = imgBase;
      mainImg.setAttribute('data-fallback', imgFallback);
      mainImg.alt = (slug||'product').replace(/[-_]/g,' ');
      mainLink.href = imgBase; // open full image

      // defaults
      let data = FALLBACKS[id] || {title:`Item #${id}`, cat:'HTML', price:0, desc:'—', tech:'HTML/CSS/JS'};
      let demoURL = `images/catalog/html${encodeURIComponent(id)}.html`;

      // try to enrich from products.json
      try{
        const res = await fetch('assets/data/products.json', {cache:'no-store'});
        if(res.ok){
          const items = await res.json();
          const arr = Array.isArray(items) ? items : (items.items||[]);
          const found = arr.find(x => String(x.id)===String(id));
          if(found){
            data = {
              title: found.title || data.title,
              cat: (found.category || found.cat || data.cat),
              price: (found.price ?? data.price),
              desc: found.desc || found.description || data.desc,
              tech: found.tech || data.tech,
              ver:  found.version || '1.0.0',
              updated: found.updated || found.date || ''
            };
            if(found.image){ mainImg.src = found.image; mainLink.href = found.image; }
            if(found.demo){ demoURL = found.demo; }
          }
        }
      }catch(e){ /* silent fallback */ }

      // hydrate UI
      titleEl.textContent = data.title;
      priceEl.textContent = (data.price===0 || data.price==='0') ? 'Free' : `$${data.price}`;
      if (data.price===0 || data.price==='0'){ freeBadge.classList.remove('hide'); }
      catBadge.textContent = data.cat || 'HTML';
      bcCat.textContent = data.cat || 'Product';
      shortEl.textContent = data.desc;
      descEl.textContent = data.desc;
      catEl.textContent = data.cat || 'HTML';
      techEl.textContent = data.tech || 'HTML/CSS/JS';
      pidEl.textContent = id;
      slugEl.textContent = slug || (data.title||'').toLowerCase().replace(/\s+/g,'-');
      updatedEl.textContent = new Date().toISOString().slice(0,10);
      preview.href = demoURL;

      // add to cart (uses main.js cart too, but we ensure href if JS disabled)
      addBtn.href = `cart.html?add=${encodeURIComponent(id)}`;
      addBtn.addEventListener('click',(e)=>{ e.preventDefault(); try{ window.RGZTEC?.addToCart?.(id,1); }catch{}; addBtn.textContent='Added ✓'; setTimeout(()=>addBtn.textContent='Add to cart',1200); });

      // simple tabs
      function setTab(idActive){
        $$('.tabs a').forEach(a=>{
          const is = a.getAttribute('href')==='#'+idActive;
          a.classList.toggle('active', is);
          a.setAttribute('aria-selected', String(is));
        });
        $$('.pane').forEach(p=>p.classList.toggle('hide', p.id!=='pane-'+idActive));
      }
      document.querySelector('.tabs').addEventListener('click',(e)=>{
        const a = e.target.closest('a[href^="#"]'); if(!a) return;
        e.preventDefault();
        const idAct = a.getAttribute('href').slice(1);
        setTab(idAct);
      });
      // default
      setTab('details');
    })();
  </script>
</body>
</html>
