<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>RGZTEC – Product Detail</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../assets/styles.css">
  <style>
    body{background:#f8fafc;margin:0;font-family:sans-serif}
    .container{max-width:1080px;margin:0 auto;padding:20px}
    header.topbar{border-bottom:1px solid #eef2f4;background:#fff}
    .brand{font-weight:800;text-decoration:none;color:#0f172a}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;overflow:hidden}
    .thumb{width:100%;aspect-ratio:16/10;object-fit:cover;background:#eef2f8;display:block}
    .pad{padding:16px}
    h1{margin:0 0 10px}
    .muted{color:#475569;font-size:14px}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{font-size:14px;padding:10px 14px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;text-decoration:none;color:#0f172a}
    .btn:hover{background:#f1f5f9}
    .btn.primary{background:#f97316;color:#fff;border-color:#f97316}
    .btn.primary:hover{background:#ea580c}
    @media (max-width: 820px){ .grid{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="container" style="display:flex;align-items:center;gap:16px">
      <a class="brand" href="/rgztec/">RGZTEC</a>
      <a class="btn" href="/rgztec/products/category.html">← Back to Category</a>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <!-- SOL: Görsel -->
      <div class="card">
        <img id="prodImg" class="thumb" src="" alt="">
      </div>

      <!-- SAĞ: Başlık + açıklama + aksiyonlar -->
      <div class="card pad">
        <h1 id="prodTitle">Product</h1>
        <p id="prodDesc" class="muted">Minimal template description.</p>

        <div class="row" style="margin-top:16px">
          <a id="demoLink" class="btn" target="_blank" href="#">Live Demo</a>
          <a id="createLink" class="btn primary" target="_blank" href="#">Create your store</a>
        </div>

        <div class="pad" style="padding-left:0;margin-top:8px">
          <small class="muted">Not: Demo ve mağaza linkleri seçtiğiniz ürüne göre otomatik ayarlanır.</small>
        </div>
      </div>
    </div>
  </main>

  <!-- Ürün verisini istersen kullanmak için -->
  <script src="../data/products.js"></script>

  <script>
    // URL parametrelerini al: ?img=landing-starter.webp&title=Landing%20Starter
    const params = new URLSearchParams(location.search);
    const imgParam   = params.get('img');
    const titleParam = params.get('title');

    // products.js'ten eşleşen ürünü bul (varsa)
    let product = null;
    if (window.RGZ_PRODUCTS && (imgParam || titleParam)) {
      product = window.RGZ_PRODUCTS.find(p =>
        (imgParam && p.image === imgParam) ||
        (titleParam && p.title === decodeURIComponent(titleParam))
      ) || null;
    }

    // Fallback değerler
    const title = product?.title || (titleParam ? decodeURIComponent(titleParam) : 'Product');
    const image = product?.image || imgParam || 'landing-starter.webp';
    const desc  = product?.description || 'Template details and features.';
    const slug  = product?.slug || (title ? title.toLowerCase().replace(/\s+/g,'-') : 'template');

    // DOM elemanları
    const elTitle = document.getElementById('prodTitle');
    const elDesc  = document.getElementById('prodDesc');
    const elImg   = document.getElementById('prodImg');
    const demoLink = document.getElementById('demoLink');
    const createLink = document.getElementById('createLink');

    // Başlık + açıklama
    elTitle.textContent = title;
    elDesc.textContent = desc;

    // Görsel
    elImg.src = `../images/${image}`;
    elImg.alt = `${title} Preview`;
    elImg.loading = 'lazy';
    elImg.addEventListener('error', () => {
      elImg.replaceWith(Object.assign(document.createElement('div'), {
        className: 'thumb',
        style: 'display:flex;align-items:center;justify-content:center;color:#9fb0cc;font-size:12px;border-top-left-radius:16px;border-top-right-radius:16px',
        innerText: 'Görsel bulunamadı'
      }));
    });

    // Linkler
    demoLink.href = `/rgztec/demo/?t=${slug}`;
    createLink.href = `/rgztec/demo/?t=${slug}#new`;
  </script>
</body>
</html>

