<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>RGZTEC ‚Ä¢ Store</title>
<meta name="description" content="Store page template. Header name changes by slug; categories and texts are store-specific."/>

<style>
  :root { --text:#111827; --icon:#6b7280; --hover:#0b0b0b; --line:#d1d5db;
          --studio-bg:#1f2937; --rgztec:#f97316; --rgztec-dark:#ea580c; }
  *{box-sizing:border-box} body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:#fff}

  /* Top bar (index.html ile uyumlu) */
  .topbar{background:#fff;border-bottom:1px solid var(--line)}
  .wrap{max-width:1200px;margin:0 auto;padding:10px 16px;display:flex;align-items:center;gap:16px}
  .brand{font-weight:800;font-size:22px;color:var(--rgztec);text-decoration:none}
  .studio{font-weight:600;font-size:16px;background:var(--studio-bg);color:#fff;padding:4px 10px;border-radius:8px;line-height:1}
  .search{flex:1;display:flex;gap:8px;max-width:760px;margin-left:6px;border:2px solid #111827;border-radius:999px;padding:6px 8px 6px 12px;background:#fff}
  .search input{flex:1;border:0;outline:0;font-size:15px;padding:6px 8px}
  .search button{border:0;background:none;color:var(--icon);font-size:16px;cursor:pointer;padding:0 10px}
  .icons{display:flex;gap:14px;align-items:center}
  .icons a{text-decoration:none;color:var(--icon);font-size:16px}
  .open-store{background:var(--rgztec);color:#fff !important;font-weight:600;padding:7px 18px;border-radius:999px;box-shadow:0 2px 4px rgba(0,0,0,.1);transition:all .2s}
  .open-store:hover{background:var(--rgztec-dark);transform:translateY(-1px);box-shadow:0 4px 6px rgba(0,0,0,.15)}

  /* √úst a√ßƒ±klama (tagline) */
  .intro{max-width:1200px;margin:14px auto 0;padding:0 16px;color:#475569;font-size:15px}

  /* Kategoriler: maƒüazaya √∂zel doldurulacak */
  .categories{max-width:1200px;margin:8px auto 0;display:flex;justify-content:center;flex-wrap:wrap;gap:28px;padding:6px 16px 10px}
  .categories a{color:var(--text);text-decoration:none;font-weight:500;font-size:15px;position:relative;padding:4px;transition:.2s}
  .categories a:hover{color:var(--hover)}
  .categories a::after{content:"";position:absolute;left:0;right:0;bottom:-3px;height:2px;background:transparent;transition:.2s}
  .categories a:hover::after{background:var(--hover)}

  .divider{border:none;border-top:1px solid var(--line);margin:10px 0 0;width:100%}

  /* ƒ∞√ßerik alanƒ± ≈üimdilik bo≈ü */
  main{max-width:1200px;margin:20px auto;padding:16px}
  .empty{border:2px dashed var(--line);border-radius:12px;padding:24px;text-align:center;color:#6b7280}
</style>
</head>
<body>

<!-- TOP BAR -->
<header class="topbar">
  <div class="wrap">
    <a class="brand" href="./">RGZTEC</a>
    <span id="studioName" class="studio">Store</span>
    <form class="search" onsubmit="return false;">
      <input type="search" placeholder="Search for anything" aria-label="Search"/>
      <button type="submit" aria-label="Search">üîç</button>
    </form>
    <nav class="icons" aria-label="Quick actions">
      <a href="login" aria-label="Sign in">Sign in</a>
      <a href="cart" title="Cart" aria-label="Cart">üõí</a>
      <a href="become-seller" class="open-store" aria-label="Open your store">Open Store</a>
    </nav>
  </div>
</header>

<!-- Maƒüaza a√ßƒ±klamasƒ± (slug‚Äôa g√∂re) -->
<p id="intro" class="intro"></p>

<!-- KATEGORƒ∞LER (slug‚Äôa g√∂re) -->
<nav id="catNav" class="categories" aria-label="Store Categories"></nav>

<hr class="divider"/>

<!-- ƒ∞√áERƒ∞K ‚Äì ≈ûƒ∞MDƒ∞Lƒ∞K BO≈û -->
<main>
  <div class="empty">
    This store has no products yet. Use <b>Open Store</b> or seller tools to add products here.
  </div>
</main>

<script>
  (async function () {
    const params = new URLSearchParams(location.search);
    const slug = (params.get('slug') || '').trim();
    const nameEl = document.getElementById('studioName');
    const introEl = document.getElementById('intro');
    const catNav = document.getElementById('catNav');

    if (!slug) return; // slug yoksa varsayƒ±lan kalsƒ±n

    try {
      // 1) stores.json ‚Üí ba≈ülƒ±k + renk
      const sres = await fetch('data/stores.json', { cache: 'no-store' });
      if (!sres.ok) throw new Error('stores.json not found');
      const { stores = [] } = await sres.json();
      const meta = stores.find(s => s.slug === slug);

      if (meta) {
        if (nameEl) {
          nameEl.textContent = meta.name || meta.slug;
          if (meta.color) nameEl.style.background = meta.color;
        }
        document.title = `RGZTEC ‚Ä¢ ${meta.name || meta.slug}`;
      } else {
        if (nameEl) nameEl.textContent = slug;
        document.title = `RGZTEC ‚Ä¢ ${slug}`;
      }

      // 2) store-content.json ‚Üí tagline + categories
      const cres = await fetch('data/store-content.json', { cache: 'no-store' });
      if (cres.ok) {
        const content = await cres.json();
        const entry = content[slug];

        // Tagline
        introEl.textContent = (entry && entry.tagline) ? entry.tagline : (meta?.desc || '');

        // Categories render
        const cats = (entry && Array.isArray(entry.categories)) ? entry.categories : [];
        catNav.innerHTML = cats.length
          ? cats.map(c => `<a href="#">${escapeHtml(c)}</a>`).join('')
          : ''; // hi√ß yoksa bo≈ü bƒ±rak
      } else {
        // content dosyasƒ± yoksa, intro'ya desc yaz, kategorileri bo≈ü bƒ±rak
        introEl.textContent = meta?.desc || '';
      }

    } catch (e) {
      console.warn(e);
    }

    function escapeHtml(s=''){
      return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    }
  })();
</script>
</body>
</html>
