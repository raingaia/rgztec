<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RGZTEC â€¢ Seller Sign in</title>
<meta name="description" content="Sign in to manage your store and products on RGZTEC."/>

<!-- âœ… IMPORTANT:
  This file should live at: /rgztec/seller/login.html
  Shared assets live at:     /rgztec/assets/...
  So we use ../assets/... (works under /rgztec/ and local docs testing)
-->

<link rel="stylesheet" href="../assets/css/base.css?v=1">
<link rel="stylesheet" href="../assets/css/styles.css?v=1">
<link rel="stylesheet" href="../assets/css/card.css?v=1">

<style>
  :root{
    --ink:#0b1220; --muted:#64748b; --line:#e5e7eb; --line-strong:#d7dbe3;
    --brand:#f97316; --brand-700:#ea580c;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);
    background:radial-gradient(1200px 600px at -10% -20%, #fff 0, #f9fbff 55%, #f2f5fb 100%)}

  .hdr{max-width:1120px;margin:18px auto 0;padding:0 18px;display:flex;align-items:center;justify-content:space-between}
  .brand{font-weight:900;font-size:22px;color:var(--brand);text-decoration:none}
  .hdr a.link{color:var(--muted);text-decoration:none;font-weight:600}
  .hdr a.link:hover{color:var(--ink);text-decoration:underline}

  .wrap{max-width:1120px;margin:22px auto;padding:0 18px;display:grid;grid-template-columns:1fr 1fr;gap:28px}
  .panel{background:#fff;border:1px solid var(--line);border-radius:18px;box-shadow:0 8px 24px rgba(2,6,23,.06)}
  .p-inner{padding:26px}
  .title{margin:0 0 6px;font-size:28px;font-weight:900}
  .sub{margin:0 0 18px;color:var(--muted)}

  form{display:grid;gap:14px}
  .lbl{font-weight:700;font-size:13px;margin-bottom:6px}
  .txt{width:100%;height:44px;border:1.5px solid var(--line-strong);border-radius:12px;padding:10px 12px;font-size:15px}
  .txt:focus{outline:none;border-color:#94a3b8;box-shadow:0 0 0 3px rgba(148,163,184,.25)}
  .row{display:flex;justify-content:space-between;align-items:center;gap:10px}
  .chk{display:flex;align-items:center;gap:8px;color:var(--muted);font-size:14px}
  .a{color:var(--brand);text-decoration:none;font-weight:700} .a:hover{color:var(--brand-700)}
  .btn{height:46px;border:0;border-radius:12px;background:var(--brand);color:#fff;font-weight:800;cursor:pointer}
  .btn:hover{background:var(--brand-700);transform:translateY(-1px)}
  .btn:disabled{opacity:.6;cursor:not-allowed}

  .alert{display:none;margin-top:2px;padding:10px 12px;border-radius:10px;font-size:14px}
  .error{border:1px solid #fecaca;background:#fff1f2;color:#b91c1c}
  .ok{border:1px solid #bbf7d0;background:#ecfdf5;color:#065f46}

  .foot{text-align:center;margin-top:14px;color:var(--muted);font-size:14px}
  .foot a{font-weight:800;color:var(--brand);text-decoration:none}
  .foot a:hover{color:var(--brand-700);text-decoration:underline}

  .hero{position:relative;min-height:520px;overflow:hidden}
  .hero-head{padding:26px 26px 0}
  .h1{margin:0;font-weight:900;font-size:24px}
  .hsub{margin:6px 0 18px;color:var(--muted)}
  .illus{position:absolute;inset:0;padding:26px;display:grid;place-items:center}
  .cardy{width:86%;max-width:520px;aspect-ratio:16/10;border-radius:18px;border:1px solid var(--line);
         background:linear-gradient(180deg,#fff,#f7fafc);box-shadow:0 14px 28px rgba(2,6,23,.09);position:relative}
  .bar{position:absolute;left:14px;right:14px;top:14px;height:10px;border-radius:999px;background:#e2e8f0}
  .line{position:absolute;left:14px;right:24px;height:12px;border-radius:6px;background:#eef2f7}
  .line.l1{top:64px;width:78%} .line.l2{top:92px;width:56%} .line.l3{top:120px;width:64%}
  .kpis{position:absolute;left:auto;right:-10%;top:20%;width:160px;border:1px solid var(--line);background:white;border-radius:16px;box-shadow:0 10px 18px rgba(2,6,23,.1);padding:10px}
  .k{display:flex;justify-content:space-between;margin:6px 0;font-weight:800}
  .tagz{display:flex;gap:8px;flex-wrap:wrap;margin-top:160px;padding:0 26px 26px}
  .tag{border:1px solid var(--line);background:#fff;border-radius:999px;padding:6px 10px;font-weight:700;font-size:12px}

  @media (max-width:980px){ .wrap{grid-template-columns:1fr} .hero{min-height:auto} .illus{position:relative} .kpis{display:none}}
</style>
</head>
<body>

<header class="hdr">
  <!-- âœ… Home of RGZTEC (one level up from /seller/) -->
  <a class="brand" href="../">RGZTEC</a>
  <!-- âœ… Optional: later you can build seller onboarding -->
  <a class="link" href="./create-account/">Create an Account</a>
</header>

<main class="wrap" aria-labelledby="signinTitle">
  <!-- LEFT: FORM -->
  <section class="panel" aria-label="Seller sign in form">
    <div class="p-inner">
      <h1 id="signinTitle" class="title">Seller sign in</h1>
      <p class="sub">Log in to manage your store, products and banners.</p>

      <div id="ok"  class="alert ok"    role="status">Signed in. Redirectingâ€¦</div>
      <div id="err" class="alert error" role="alert">Please enter a valid Seller ID and Access Key.</div>
      <div id="err2" class="alert error" role="alert">Login failed. Check your Seller ID / Access Key.</div>

      <form id="form" novalidate>
        <div>
          <label class="lbl" for="sellerId">Seller ID</label>
          <input class="txt" id="sellerId" name="sellerId" type="text" placeholder="e.g. acme-store" required autocomplete="username" />
        </div>

        <div>
          <label class="lbl" for="accessKey">Access Key</label>
          <input class="txt" id="accessKey" name="accessKey" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required minlength="6" autocomplete="current-password"/>
        </div>

        <div class="row">
          <label class="chk"><input type="checkbox" id="remember" checked /> Remember me</label>
          <a class="a" href="./forgot-password.html">Forgot key?</a>
        </div>

        <button class="btn" id="submitBtn" type="submit">Sign in</button>

        <p class="foot">Donâ€™t have a seller account?
          <a href="./create-account/">Sign up</a>
        </p>
      </form>
    </div>
  </section>

  <!-- RIGHT: VISUAL / VALUE PROP -->
  <aside class="panel hero" aria-label="Why RGZTEC">
    <div class="hero-head">
      <h2 class="h1">Secure. Fast. Built for creators.</h2>
      <p class="hsub">Seller-grade control, sponsor banners, and premium distribution.</p>
    </div>

    <div class="illus" aria-hidden="true">
      <div class="cardy">
        <span class="bar"></span>
        <span class="line l1"></span>
        <span class="line l2"></span>
        <span class="line l3"></span>
        <div class="kpis">
          <div class="k"><span>Conversion</span><span>+18%</span></div>
          <div class="k"><span>Chargebacks</span><span>â†“ 42%</span></div>
          <div class="k"><span>Payout</span><span>T+1</span></div>
        </div>
      </div>
    </div>

    <div class="tagz">
      <span class="tag">ðŸ”’ Secure tokens</span>
      <span class="tag">âš¡ Fast publish</span>
      <span class="tag">ðŸ§© Modular stores</span>
      <span class="tag">ðŸ“ˆ Banner analytics</span>
    </div>
  </aside>
</main>

<script>
  // --- querystring ---
  const qs = new URLSearchParams(location.search);
  if (qs.get('welcome') === '1') {
    const ok = document.getElementById('ok'); ok.style.display = 'block';
  }

  const form = document.getElementById('form');
  const err  = document.getElementById('err');
  const err2 = document.getElementById('err2');
  const btn  = document.getElementById('submitBtn');
  const okBox = document.getElementById('ok');

  function hideAlerts(){ [err, err2].forEach(e=>e.style.display='none'); }

  function getToken() {
    return localStorage.getItem('rgz_seller_token') || sessionStorage.getItem('rgz_seller_token');
  }

  // If already signed in, go to seller dashboard
  const existing = getToken();
  if (existing) {
    location.replace("./index.html");
  }

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    hideAlerts();

    const sellerId = document.getElementById('sellerId').value.trim();
    const accessKey = document.getElementById('accessKey').value;

    if (!sellerId || !accessKey || accessKey.length < 6) {
      err.style.display = 'block';
      return;
    }

    btn.disabled = true;

    try {
      const r = await fetch("/api/seller/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ sellerId, accessKey })
      });

      const data = await r.json();
      if (!r.ok || !data || !data.token) {
        throw new Error(data?.error || "Login failed");
      }

      const remember = !!document.getElementById('remember').checked;
      if (remember) {
        localStorage.setItem("rgz_seller_token", data.token);
        localStorage.setItem("rgz_seller_id", sellerId);
        sessionStorage.removeItem("rgz_seller_token");
      } else {
        sessionStorage.setItem("rgz_seller_token", data.token);
        sessionStorage.setItem("rgz_seller_id", sellerId);
        localStorage.removeItem("rgz_seller_token");
      }

      okBox.textContent = "Signed in. Redirectingâ€¦";
      okBox.style.display = "block";

      setTimeout(() => { location.href = "./index.html"; }, 250);
    } catch (e2) {
      err2.textContent = String(e2?.message || e2);
      err2.style.display = 'block';
      btn.disabled = false;
    }
  });
</script>
</body>
</html>

